MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*******************************************************************
                      00002 ; Keypad/LCD Test Code
                      00003 ; Assembler : mpasm.exe
                      00004 ; Linker    : mplink.exe
                      00005 ; Written By : Kevin Lam
                      00006 ;*******************************************************************
                      00007 
                      00008       list p=16f877                 ; list directive to define processor
                      00009       #include <p16f877.inc>        ; processor specific variable definitions
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Dec 08 2015
                      00005 ;  MPASM PIC16F877 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2015 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00541         LIST
2007   3F72           00010       __CONFIG _CP_OFF & _WDT_OFF & _BODEN_ON & _PWRTE_ON & _HS_OSC & _WRT_ENABLE_ON & _CPD_OFF & _LVP_O
                            FF
                      00011       Errorlevel -302               ; switches off message [302] Register in operand not in bank 0
                      00012       Errorlevel -305
                      00013 
                      00014       #include <lcd.inc>                           ;Import LCD control functions from lcd.asm
  0000                00001         extern  InitLCD,WR_INS,WR_DATA,ClrLCD
                      00015         #include <rtc_macros.inc>
                      00001         ;External labels
  0000                00002         extern  write_rtc,read_rtc,rtc_convert,i2c_common_setup
                      00003 
                      00004 ;RTC Macros;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00005 
                      00006 rtc_resetAll    macro
                      00007 ;input:         none
                      00008 ;output:        none
                      00009 ;desc:          Resets all the time keeping registers on the RTC to zero
                      00010         banksel         0x74
                      00011         clrf            0x74
                      00012         banksel         0x73
                      00013         clrf            0x73
                      00014     call        write_rtc               ;Write 0 to Seconds
                      00015         banksel         0x73
                      00016     incf        0x73                    ;Set register address to 1
                      00017         call            write_rtc
                      00018         banksel         0x73
                      00019     incf        0x73                    ;Set register address to 2
                      00020         call            write_rtc
                      00021         banksel         0x73
                      00022     incf        0x73                    ;Set register address to 3
                      00023         call            write_rtc
                      00024         banksel         0x73
                      00025     incf        0x73                    ;Set register address to 4
                      00026         call            write_rtc
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00027         banksel         0x73
                      00028     incf        0x73                    ;Set register address to 5
                      00029         call            write_rtc
                      00030         banksel         0x73
                      00031     incf        0x73                    ;Set register address to 6
                      00032         call            write_rtc
                      00033         endm
                      00034 
                      00035 rtc_set         macro   addliteral,datliteral
                      00036 ;input:         addliteral: value of address
                      00037 ;                       datliteral: value of data
                      00038 ;output:        none
                      00039 ;desc:          loads the data in datliteral into the 
                      00040 ;                       address specified by addliteral in the RTC
                      00041         banksel 0x73
                      00042         movlw   addliteral
                      00043         movwf   0x73
                      00044         banksel 0x74
                      00045         movlw   datliteral
                      00046         movwf   0x74    
                      00047         call    write_rtc
                      00048         endm
                      00049 
                      00050 rtc_read        macro   addliteral
                      00051 ;input:         addliteral
                      00052 ;output:        0x75, 0x77, 0x78
                      00053 ;desc:          From the selected register in the RTC, read the data
                      00054 ;                       and load it into 0x75. 0x75 is also converted into 
                      00055 ;                       ASCII characters and the tens digit is placed into
                      00056 ;                       0x77 and the ones digit is placed in 0x78
                      00057         movlw   addliteral
                      00058         banksel 0x73
                      00059         movwf   0x73
                      00060         call    read_rtc
                      00061         banksel 0x75
                      00062         movf    0x75,w
                      00063         call    rtc_convert   
                      00064         endm
                      00016 
                      00017         udata_shr
                      00018 
                      00019       
                      00020       
                      00021         cblock  0x30
  00000030            00022                 COUNTH
  00000031            00023                 COUNTM  
  00000032            00024                 COUNTL  
  00000033            00025                 Table_Counter
  00000034            00026                 lcd_tmp 
  00000035            00027                 lcd_d1
  00000036            00028                 lcd_d2
  00000037            00029                 com     
  00000038            00030                 dat
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000039            00031                 temp
  0000003A            00032                 Temp
  0000003B            00033                 Location1
  0000003C            00034                 Location2 
  0000003D            00035                 NumH
  0000003E            00036                 NumL
  0000003F            00037                 TenK
  00000040            00038                 Thou
  00000041            00039                 Hund
  00000042            00040                 Tens
  00000043            00041                 Ones
  00000044            00042                 distanceMoved
  00000045            00043                 isColumnThere
  00000046            00044                 frontstickerValues
  00000047            00045                 backstickerValues
  00000048            00046                 frontbinCounter
  00000049            00047                 backbinCounter
  0000004A            00048                 binCounter
                      00049         endc    
                      00050 
                      00051         ;Declare constants for pin assignments (LCD on PORTD)
                      00052                 #define RS      PORTD,2
                      00053                 #define E       PORTD,3
                      00054                 #define IR1     PORTA,0
                      00055                 #define IR2     PORTA,1
                      00056                 #define US      PORTA,2
                      00057                 #define DCMotor PORTA,3
                      00058                 
                      00059 ;distanceMoved  equ     b'0'
                      00060 
                      00061          ORG       0x0000     ;RESET vector must always be at 0x00
0000   2???           00062          goto      init       ;Just jump to the main code section.
                      00063          
                      00064          ;ORG      0x100        ;this command is sketchy
                      00065          
                      00066 
                      00067 Key      macro  value, subroutine
                      00068          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
                      00069          andlw          0x0F
                      00070          xorlw          value
                      00071          btfsc          STATUS, Z
                      00072          call           subroutine
                      00073         endm
                      00074 
                      00075 Rotation macro  value
                      00076          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
                      00077          andlw          0x0F
                      00078          xorlw          value
                      00079          btfsc          STATUS, Z
                      00080          call           ShiftLeft
                      00081         endm
                      00082 
                      00083 ;***************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00084 ; Delay: ~160us macro
                      00085 ;***************************************
                      00086 LCD_DELAY macro
                      00087         movlw   0xFF
                      00088         movwf   lcd_d1
                      00089         decfsz  lcd_d1,f
                      00090         goto    $-1
                      00091         endm
                      00092         
                      00093 ;***************************************
                      00094 ; Display macro
                      00095 ;***************************************
                      00096 Display macro   Message
                      00097                 local   loop_
                      00098                 local   end_
                      00099                 clrf    Table_Counter
                      00100                 clrw            
                      00101 loop_   movf    Table_Counter,W
                      00102                 call    Message
                      00103                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
                      00104                 btfsc   STATUS,Z
                      00105                         goto    end_
                      00106                 call    WR_DATA
                      00107                 incf    Table_Counter,F
                      00108                 goto    loop_
                      00109 end_
                      00110                 endm
                      00111                 
                      00112 ;*******************************************************
                      00113 ;******             BCD                 ****************
                      00114 ;*******************************************************
                      00115         
                      00116 ;---------------- Binary (16-bit) to BCD -----------------------
                      00117 ;
                      00118 ;bin8_BCD:      ; --- Takes Binary.number in      NumL
                      00119 ;bin16_BCD:     ; --- Takes Binary.number in NumH:NumL 
                      00120                 ; --> Returns decimal.form  in TenK:Thou:Hund:Tens:Ones
                      00121 ;
                      00122 ; Uses variables
                      00123 ; NumH, NumL
                      00124 ; TenK, Thou, Hund, Tens, Ones
                      00125                 
                      00126 ;BCD    macro   NumH, NumL
                      00127 
0001                  00128 bin16_BCD
0001   0E3D           00129         swapf   NumH, W
0002   390F           00130         andlw   0x0F
0003   3EF0           00131         addlw   0xF0
0004   00C0           00132         movwf   Thou 
0005   07C0           00133         addwf   Thou, F 
0006   3EE2           00134         addlw   0xE2 
0007   00C1           00135         movwf   Hund 
0008   3E32           00136         addlw   0x32 
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0009   00C3           00137         movwf   Ones 
                      00138 
000A   083D           00139         movf    NumH, W 
000B   390F           00140         andlw   0x0F 
000C   07C1           00141         addwf   Hund, F 
000D   07C1           00142         addwf   Hund, F 
000E   07C3           00143         addwf   Ones, F 
000F   3EE9           00144         addlw   0xE9 
0010   00C2           00145         movwf   Tens 
0011   07C2           00146         addwf   Tens, F 
0012   07C2           00147         addwf   Tens, F 
                      00148 
0013   0E3E           00149         swapf   NumL, W 
0014   390F           00150         andlw   0x0F 
0015   07C2           00151         addwf   Tens, F 
0016   07C3           00152         addwf   Ones, F 
                      00153 
0017   0DC2           00154         rlf    Tens, F 
0018   0DC3           00155         rlf    Ones, F 
0019   09C3           00156         comf    Ones, F 
001A   0DC3           00157         rlf    Ones, F 
                      00158 
001B   083E           00159         movf    NumL, W 
001C   390F           00160         andlw   0x0F 
001D   07C3           00161         addwf   Ones, F 
001E   0DC0           00162         rlf    Thou,F 
                      00163 
001F   3007           00164         movlw   0x07 
0020   00BF           00165         movwf   TenK 
                      00166 
0021   300A           00167         movlw   0x0A
0022                  00168 Lb1
0022   03C2           00169         decf    Tens, F 
0023   07C3           00170         addwf   Ones, F 
0024   1C03           00171         btfss   STATUS, C 
0025   2???           00172         goto            Lb1 
0026                  00173 Lb2
0026   03C1           00174         decf    Hund, F 
0027   07C2           00175         addwf   Tens, F 
0028   1C03           00176         btfss   STATUS,C 
0029   2???           00177         goto            Lb2 
002A                  00178 Lb3
002A   03C0           00179         decf    Thou, F 
002B   07C1           00180         addwf   Hund, F 
002C   1C03           00181         btfss   STATUS,C
002D   2???           00182         goto            Lb3 
002E                  00183 Lb4
002E   03BF           00184         decf    TenK, F 
002F   07C0           00185         addwf   Thou, F 
0030   1C03           00186         btfss   STATUS,C 
0031   2???           00187         goto            Lb4 
                      00188 
0032   3400           00189         retlw   0
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0033   0008           00190         return
                      00191 ;endm
                      00192 
                      00193 ;***************************************
                      00194 ; Initialize
                      00195 ;***************************************
0034                  00196 init
0034   018B           00197          clrf      INTCON         ; No interrupts
                      00198 
0035   1683           00199          bsf       STATUS,RP0     ; select bank 1
0036   0185           00200          clrf      TRISA          ; All port A is output
0037   30F2           00201          movlw     b'11110010'    ; Set required keypad inputs
0038   0086           00202          movwf     TRISB
0039   0187           00203          clrf      TRISC          ; All port C is output
003A   0188           00204          clrf      TRISD          ; All port D is output
                      00205          
                      00206                   ;Set SDA and SCL to high-Z first as required for I2C
003B   1607           00207                  bsf       TRISC,4                
003C   1587           00208                  bsf       TRISC,3
                      00209 
003D   1283           00210          bcf       STATUS,RP0     ; select bank 0
003E   0185           00211          clrf      PORTA
003F   0186           00212          clrf      PORTB
0040   0187           00213          clrf      PORTC
0041   0188           00214          clrf      PORTD
                      00215          
                      00216         ;Set up I2C for communication
                      00217                  
0042   2???           00218         call       i2c_common_setup
                      00219 ;*******************************************************************************
                      00220         ; UNCOMMENT IF YOU WANT TO CHANGE THE TIME
                      00221         ;rtc_resetAll
                      00222         ;call set_rtc_time
                      00223 ;*******************************************************************************
                      00224                  
                      00225                  ;Used to set up time in RTC, load to the PIC when RTC is used for the first time
                      00226                  ;call     set_rtc_time
                      00227           
0043   2???           00228          call      InitLCD        ;Initialize the LCD (code in lcd.asm; imported by lcd.inc)
                      00229           ;A/D converter attempt
                      00230          
0044   1303           00231          bcf    STATUS,RP1
0045   1683           00232          bsf    STATUS,RP0      ;Select bank 1
                      00233          
0046   1405           00234          bsf    IR1             ;makes RA0 an input
0047   1283           00235          bcf    STATUS,RP0      ; go back to bank 0
                      00236          
0048   1507           00237         bsf     PORTC,2         ; gives RC2 5 volts
                      00238          
                      00239         ; Set ADCON1 to use RA0 as analog input
                      00240         
                      00241         
0049   1683           00242         bsf     STATUS,RP0      ;Select bank 1
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004A   3006           00243         movlw   b'00000110'     ;left justified, all inputs digital
004B   009F           00244         movwf   ADCON1                  ;All digital input, reference voltage Vdd Vss
                      00245 
                      00246         ;ADCON0
004C   1283           00247         bcf     STATUS,RP0
004D   30C5           00248         movlw   b'11000101'     ;movlw  b'11000101' selects the clock and ra0 as the reader pin
004E   009F           00249         movwf   ADCON0
                      00250         
                      00251 ;***************************************************
                      00252 ; Initialize variables and Displays
                      00253 ;****************************************************   
                      00254         Display         Welcome_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
004F   01B3               M                 clrf    Table_Counter
0050   0103               M                 clrw            
0051   0833               M loop_   movf    Table_Counter,W
0052   2???               M                 call    Welcome_Msg
0053   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0054   1903               M                 btfsc   STATUS,Z
0055   2???               M                         goto    end_
0056   2???               M                 call    WR_DATA
0057   0AB3               M                 incf    Table_Counter,F
0058   2???               M                 goto    loop_
0059                      M end_
                      00255         
                      00256         
0059   3000           00257         movlw   b'0'
005A   00C8           00258         movwf   frontbinCounter         ;initialize binCounter with zero
005B   3000           00259         movlw   b'0'
005C   00C9           00260         movwf   backbinCounter          ;initialize binCounter with zero
                      00261         
                      00262 ;***************************************
                      00263 ; Number to Printable
                      00264 ;***************************************
                      00265 PrintNumber macro       number
                      00266         ;movf       number ,W
                      00267         movfw       number
                      00268         call        DectoChar
                      00269         call        WR_DATA
                      00270         endm
                      00271 
                      00272 ; white and black sticker labels at bottom
                      00273         
                      00274 
                      00275 ;*******************************************************************************************************
                            *******************************************
                      00276 ;                                                                 MAIN CODE
                      00277 ;-------------------------------------------------------------------------------------------------------
                            ---------------------------------------
005D                  00278 Main    
                      00279 
                      00280 ; WAIT FOR INITIAL INPUT
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

005D   2???           00281     goto    KeypadandLCD     ;calls initial form of keypad and LCD, where  robot is waiting for input to
                             begin 
                      00282         
                      00283     
005E   3000           00284     movlw   b'0000'
005F   00C8           00285     movwf   frontbinCounter         ;testing with value of 5 bins
0060   00C9           00286     movwf   backbinCounter    
                      00287     
                      00288     
                      00289     
                      00290     
                      00291     
                      00292 ;    goto    getTimeRTC     ; gets time from RTC clock
                      00293 ;       
                      00294 ;;   MOTOR ON
                      00295 ;       
                      00296 ;    bsf        DCMotor             ; begin forward movement, set appropriate bit to 1  
                      00297 ;    movlw   b'1'
                      00298 ;    addwf  distanceMoved,f     ; increments distanceMoved by 1 (will experimentally find binary value f
                            or 4 m)
                      00299 ;    
                      00300 ;;   CHECK COLUMN
                      00301 ;    
                      00302 ;    call    ChooseIR1          ;selects IR1 for data conversion
                      00303 ;    call    pollColumnSensor   ;checks to see if column present
                      00304 ;    btfss   isColumnThere,0
                      00305 ;    goto    Main
                      00306 ;    
                      00307 ;;   CHECK IF AT THE END OF BUCKET LINE
                      00308 ;    
                      00309 ;    call    pollUSsensor       ; call ultrasonic sensor
                      00310 ;    btfsc   nothingAhead,0     ;   checks if there is nothing ahead
                      00311 ;    goto    Finalize
                      00312 ;    
                      00313 ;;   CHECK IF CONTAINER IS THERE
                      00314 ;    
                      00315 ;    btfss   withinDetectionRange,0  ; checks whether container ahead is within detection range
                      00316 ;    goto    Main
                      00317 ;   call start arm motor
                      00318 ;   call other motor
                      00319 ;    call    frontscanContainer     ; label to begin container scanning
                      00320 ;    call    backscanContainer      ; label to begin container scanning
                      00321 ;    movlw  b'1'
                      00322 ;    addwf   frontbinCounter,f      ;increment the bin counters
                      00323 ;    addwf   backbinCounter,f
0061   2???           00324     goto    Main
                      00325 
                      00326 
                      00327                 
                      00328 ;-----------------------------------------------------------------------------------------------------  
                                    
                      00329 
                      00330 ;*************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00331 ;       Keypad and LCD forms        
                      00332 ;*************************************
                      00333         
                      00334         
                      00335         
0062   1C86           00336 KeypadandLCD    btfss           PORTB,1     ;Wait until data is available from the keypad
0063   2???           00337                 goto            $-1 
                      00338 
0064   0E06           00339                 swapf           PORTB,W     ;Read PortB<7:4> into W<3:0>
0065   390F           00340                 andlw           0x0F
0066   00B9           00341                 movwf           temp
                      00342                 Key     0x00, OperationDisplay
0067   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0068   390F               M          andlw          0x0F
0069   3A00               M          xorlw          0x00
006A   1903               M          btfsc          STATUS, Z
006B   2???               M          call           OperationDisplay
                      00343                 ;Key    0x00, goback
                      00344                 Key     0x01, StickerDisplay
006C   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
006D   390F               M          andlw          0x0F
006E   3A01               M          xorlw          0x01
006F   1903               M          btfsc          STATUS, Z
0070   2???               M          call           StickerDisplay
                      00345                 Rotation        0x03
0071   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0072   390F               M          andlw          0x0F
0073   3A03               M          xorlw          0x03
0074   1903               M          btfsc          STATUS, Z
0075   2???               M          call           ShiftLeft
                      00346                 Key     0x04, BinsDisplay
0076   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0077   390F               M          andlw          0x0F
0078   3A04               M          xorlw          0x04
0079   1903               M          btfsc          STATUS, Z
007A   2???               M          call           BinsDisplay
                      00347                 Key     0x05, StickerDisplay
007B   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
007C   390F               M          andlw          0x0F
007D   3A05               M          xorlw          0x05
007E   1903               M          btfsc          STATUS, Z
007F   2???               M          call           StickerDisplay
                      00348                 Key     0x06, BinLocationsDisplay
0080   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0081   390F               M          andlw          0x0F
0082   3A06               M          xorlw          0x06
0083   1903               M          btfsc          STATUS, Z
0084   2???               M          call           BinLocationsDisplay
                      00349                 Key     0x08, OperationTimeDisplay
0085   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0086   390F               M          andlw          0x0F
0087   3A08               M          xorlw          0x08
0088   1903               M          btfsc          STATUS, Z
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0089   2???               M          call           OperationTimeDisplay
                      00350                 Key     0x09, RTCDisplay
008A   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
008B   390F               M          andlw          0x0F
008C   3A09               M          xorlw          0x09
008D   1903               M          btfsc          STATUS, Z
008E   2???               M          call           RTCDisplay
008F   1886           00351                 btfsc           PORTB,1     ;Wait until key is released
0090   2???           00352                 goto            $-1
0091   2???           00353                 goto            KeypadandLCD
                      00354                 
0092                  00355 goback
0092   0008           00356                 return  
                      00357                 
                      00358                 
                      00359 ;*********************************************************
                      00360 ; A to D conversion with LCD display for IR sensor
                      00361 ;*********************************************************
                      00362 
0093                  00363 LCDConversion
0093   1507           00364         bsf     PORTC,2         ; gives RC2 5 volts     
                      00365                 
0094   151F           00366         bsf     ADCON0,2                ;start conversion and wait for it to complete
0095   191F           00367         btfsc   ADCON0,2                ;LCD CONVERSION MODULE
0096   2???           00368         goto    $-1
                      00369         
0097   081E           00370         movf    ADRESH, W
0098   00BD           00371         movwf   NumH
0099   081E           00372         movf    ADRESL, W
009A   00BE           00373         movwf   NumL
                      00374         
                      00375         ;shivs code thing
009B   3003           00376         movlw   0x3
009C   00BF           00377         movwf   TenK
                      00378         
                      00379         
009D   2???           00380         call            bin16_BCD
009E   2???           00381         call            ClrLCD
                      00382         PrintNumber     TenK
                          M         ;movf       number ,W
009F   083F               M         movfw       TenK
00A0   2???               M         call        DectoChar
00A1   2???               M         call        WR_DATA
                      00383         PrintNumber     Thou
                          M         ;movf       number ,W
00A2   0840               M         movfw       Thou
00A3   2???               M         call        DectoChar
00A4   2???               M         call        WR_DATA
                      00384         PrintNumber     Hund
                          M         ;movf       number ,W
00A5   0841               M         movfw       Hund
00A6   2???               M         call        DectoChar
00A7   2???               M         call        WR_DATA
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00385         PrintNumber     Tens
                          M         ;movf       number ,W
00A8   0842               M         movfw       Tens
00A9   2???               M         call        DectoChar
00AA   2???               M         call        WR_DATA
                      00386         PrintNumber     Ones
                          M         ;movf       number ,W
00AB   0843               M         movfw       Ones
00AC   2???               M         call        DectoChar
00AD   2???               M         call        WR_DATA
00AE   2???           00387         call            HalfS
00AF   2???           00388         call            HalfS
00B0   1107           00389         bcf     PORTC,2         ; gives RC2 5 volts
00B1   0008           00390         return
                      00391 
                      00392 ;****************************
                      00393 ;       Choose IR1
                      00394 ;****************************
                      00395         
00B2                  00396 ChooseIR1
                      00397         
00B2   1405           00398         bsf     IR1             ;makes RA0 an input
00B3   30C5           00399         movlw   b'11000101'     ;movlw  b'11000101' selects the clock and ra0 as the reader pin
00B4   009F           00400         movwf   ADCON0
                      00401         
00B5   0008           00402         return
                      00403         
                      00404 ;****************************
                      00405 ;       Choose IR2
                      00406 ;****************************
                      00407         
00B6                  00408 ChooseIR2
                      00409         
00B6   1485           00410         bsf     IR2             ;makes RA0 an input
00B7   30CD           00411         movlw   b'11001101'     ;movlw  b'11000101' selects the clock and ra0 as the reader pin
00B8   009F           00412         movwf   ADCON0
                      00413         
00B9   0008           00414         return
                      00415         
                      00416         
                      00417 ;****************************************************
                      00418 ;   ScanFrontContainer
                      00419 ;****************************************************
                      00420         
00BA                  00421 ScanFrontContainer
                      00422         ; A to d conversion
                      00423         
00BA   151F           00424         bsf     ADCON0,2                ;start conversion and wait for it to complete
00BB   191F           00425         btfsc   ADCON0,2                ;LCD CONVERSION MODULE
00BC   2???           00426         goto    $-1
                      00427         
00BD   081E           00428         movf    ADRESH, W
00BE   00BD           00429         movwf   NumH
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00BF   081E           00430         movf    ADRESL, W
00C0   00BE           00431         movwf   NumL
                      00432         
                      00433 ;       btfss   ADRESH,2                ;test bit 2 of ADRESH, the bit that we believe will distinguish 
                            black and white (need to experiment)
                      00434 ;       bsf     frontstickerValues,frontbinCounter              ;if is set, means that colour is white
                      00435 ;       btfsc   ADRESH,2
                      00436 ;       bcf     frontstickerValues,frontbinCounter    ; modifies the bits in the stickervalues
                      00437         
                      00438         ;display on screen for troubleshooting purposes
                      00439         
                      00440 ;       call            bin16_BCD
                      00441 ;       call            ClrLCD
                      00442 ;       PrintNumber     TenK
                      00443 ;       PrintNumber     Thou
                      00444 ;       PrintNumber     Hund
                      00445 ;       PrintNumber     Tens
                      00446 ;       PrintNumber     Ones    
00C1   2???           00447         call            HalfS
00C2   2???           00448         call            HalfS
                      00449         
00C3   0008           00450         return
                      00451         
                      00452 ;****************************************************
                      00453 ;   ScanBackContainer
                      00454 ;****************************************************
                      00455         
00C4                  00456 ScanBackContainer
                      00457         ; A to d conversion
                      00458         
00C4   151F           00459         bsf     ADCON0,2                ;start conversion and wait for it to complete
00C5   191F           00460         btfsc   ADCON0,2                ;LCD CONVERSION MODULE
00C6   2???           00461         goto    $-1
                      00462         
00C7   081E           00463         movf    ADRESH, W
00C8   00BD           00464         movwf   NumH
00C9   081E           00465         movf    ADRESL, W
00CA   00BE           00466         movwf   NumL
                      00467         
                      00468 ;       btfss   ADRESH,2                ;test bit 2 of ADRESH, the bit that we believe will distinguish 
                            black and white (need to experiment)
                      00469 ;       bsf     backstickerValues,backbinCounter                ;if is set, means that colour is white
                      00470 ;       btfsc   ADRESH,2
Warning[202]: Argument out of range.  Least significant bits used.
00CB   10C7           00471         bcf     backstickerValues,backbinCounter    ; modifies the bits in the stickervalues
                      00472         
                      00473         ;display on screen for troubleshooting purposes
                      00474         
                      00475 ;       call            bin16_BCD
                      00476 ;       call            ClrLCD
                      00477 ;       PrintNumber     TenK
                      00478 ;       PrintNumber     Thou
                      00479 ;       PrintNumber     Hund
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00480 ;       PrintNumber     Tens
                      00481 ;       PrintNumber     Ones    
00CC   2???           00482         call            HalfS
00CD   2???           00483         call            HalfS
                      00484         
00CE   0008           00485         return
                      00486 
                      00487 ;*********************************************
                      00488 ; Keypad Modules
                      00489 ;*******************************************
                      00490          
                      00491 
00CF                  00492 OperationDisplay
00CF   2???           00493         call        Clear_Display
                      00494         
                      00495         
                      00496         
00D0   2???           00497         call        ScanFrontContainer
00D1   2???           00498         call        ScanBackContainer
00D2   2???           00499         call        ScanFrontContainer
00D3   2???           00500         call        ScanBackContainer
00D4   2???           00501         call        ScanFrontContainer
00D5   2???           00502         call        ScanBackContainer
00D6   2???           00503         call        ScanFrontContainer
00D7   2???           00504         call        ScanBackContainer
                      00505         
00D8   2???           00506         call        Clear_Display
                      00507         Display     WantResults
  0000                    M                 local   loop_
  0000                    M                 local   end_
00D9   01B3               M                 clrf    Table_Counter
00DA   0103               M                 clrw            
00DB   0833               M loop_   movf    Table_Counter,W
00DC   2???               M                 call    WantResults
00DD   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
00DE   1903               M                 btfsc   STATUS,Z
00DF   2???               M                         goto    end_
00E0   2???               M                 call    WR_DATA
00E1   0AB3               M                 incf    Table_Counter,F
00E2   2???               M                 goto    loop_
00E3                      M end_
00E3   2???           00508         call        Switch_Lines
                      00509         Display     WantRotate
  0000                    M                 local   loop_
  0000                    M                 local   end_
00E4   01B3               M                 clrf    Table_Counter
00E5   0103               M                 clrw            
00E6   0833               M loop_   movf    Table_Counter,W
00E7   2???               M                 call    WantRotate
00E8   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
00E9   1903               M                 btfsc   STATUS,Z
00EA   2???               M                         goto    end_
00EB   2???               M                 call    WR_DATA
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00EC   0AB3               M                 incf    Table_Counter,F
00ED   2???               M                 goto    loop_
00EE                      M end_
                      00510         
00EE   0008           00511         return
                      00512         
00EF                  00513 ListDisplay
00EF   2???           00514         call        Clear_Display
                      00515         Display     Results1
  0000                    M                 local   loop_
  0000                    M                 local   end_
00F0   01B3               M                 clrf    Table_Counter
00F1   0103               M                 clrw            
00F2   0833               M loop_   movf    Table_Counter,W
00F3   2???               M                 call    Results1
00F4   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
00F5   1903               M                 btfsc   STATUS,Z
00F6   2???               M                         goto    end_
00F7   2???               M                 call    WR_DATA
00F8   0AB3               M                 incf    Table_Counter,F
00F9   2???               M                 goto    loop_
00FA                      M end_
00FA   2???           00516         call        Switch_Lines
                      00517         Display     Results2
  0000                    M                 local   loop_
  0000                    M                 local   end_
00FB   01B3               M                 clrf    Table_Counter
00FC   0103               M                 clrw            
00FD   0833               M loop_   movf    Table_Counter,W
00FE   2???               M                 call    Results2
00FF   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0100   1903               M                 btfsc   STATUS,Z
0101   2???               M                         goto    end_
0102   2???               M                 call    WR_DATA
0103   0AB3               M                 incf    Table_Counter,F
0104   2???               M                 goto    loop_
0105                      M end_
                      00518         
0105   0008           00519         return
                      00520                 
0106                  00521 BinsDisplay
0106   2???           00522         call        Clear_Display
                      00523         Display     Bins
  0000                    M                 local   loop_
  0000                    M                 local   end_
0107   01B3               M                 clrf    Table_Counter
0108   0103               M                 clrw            
0109   0833               M loop_   movf    Table_Counter,W
010A   2???               M                 call    Bins
010B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
010C   1903               M                 btfsc   STATUS,Z
010D   2???               M                         goto    end_
010E   2???               M                 call    WR_DATA
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

010F   0AB3               M                 incf    Table_Counter,F
0110   2???               M                 goto    loop_
0111                      M end_
                      00524                 
0111   0008           00525         return
                      00526         
0112                  00527 StickerDisplay
0112   2???           00528         call        Clear_Display
                      00529 
                      00530 ;       movlw       b'0000000'
                      00531 ;       movwf       stickerValues
                      00532 ;       movlw       b'1111111'
                      00533 ;       movwf       backstickerValues
                      00534         
0113   3000           00535         movlw   b'0000'
0114   00C8           00536         movwf   frontbinCounter     ;testing with value of 5 bins
0115   00C9           00537         movwf   backbinCounter 
                      00538         
0116   2???           00539         call        ScanFrontContainer
0117   1C46           00540         btfss       frontstickerValues,0        ; check the ith bucket value and if it is clear,
0118   2???           00541         call        PrintBlackSticker   ; print a black sticker on the thing
0119   1846           00542         btfsc       frontstickerValues,0
011A   2???           00543         call        PrintWhiteSticker
                      00544         ;call       Switch_Lines
011B   2???           00545         call        ScanBackContainer
011C   1C47           00546         btfss       backstickerValues,0 ; check the ith bucket value and if it is clear,
011D   2???           00547         call        PrintBlackSticker   ; print a black sticker on the thing
011E   1847           00548         btfsc       backstickerValues,0
011F   2???           00549         call        PrintWhiteSticker
                      00550         ;call       Switch_Lines
                      00551         
                      00552 ;       decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00553 ;       goto        $+2
                      00554 ;       return
                      00555         
0120   3001           00556         movlw   b'0001'
0121   00C8           00557         movwf   frontbinCounter     ;testing with value of 5 bins
0122   00C9           00558         movwf   backbinCounter
                      00559         
                      00560         
                      00561         
0123   2???           00562         call        ScanFrontContainer
0124   1CC6           00563         btfss       frontstickerValues,1        ; check the ith bucket value and if it is clear,
0125   2???           00564         call        PrintBlackSticker   ; print a black sticker on the thing
0126   18C6           00565         btfsc       frontstickerValues,1
0127   2???           00566         call        PrintWhiteSticker
                      00567         ;call       Switch_Lines
0128   2???           00568         call        ScanBackContainer
0129   1CC7           00569         btfss       backstickerValues,1 ; check the ith bucket value and if it is clear,
012A   2???           00570         call        PrintBlackSticker   ; print a black sticker on the thing
012B   18C7           00571         btfsc       backstickerValues,1
012C   2???           00572         call        PrintWhiteSticker
                      00573         ;call       Switch_Lines
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00574         
                      00575 ;       decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00576 ;       goto        $+2
                      00577 ;       return
                      00578         
012D   3002           00579         movlw   b'0010'
012E   00C8           00580         movwf   frontbinCounter     ;testing with value of 5 bins
012F   00C9           00581         movwf   backbinCounter
                      00582         
                      00583         
0130   2???           00584         call        ScanFrontContainer
0131   1D46           00585         btfss       frontstickerValues,2        ; check the ith bucket value and if it is clear,
0132   2???           00586         call        PrintBlackSticker   ; print a black sticker on the thing
0133   1946           00587         btfsc       frontstickerValues,2
0134   2???           00588         call        PrintWhiteSticker
                      00589         ;call       Switch_Lines
0135   2???           00590         call        ScanBackContainer
0136   1D47           00591         btfss       backstickerValues,2 ; check the ith bucket value and if it is clear,
0137   2???           00592         call        PrintBlackSticker   ; print a black sticker on the thing
0138   1947           00593         btfsc       backstickerValues,2
0139   2???           00594         call        PrintWhiteSticker
                      00595         ;call       Switch_Lines
                      00596         
                      00597 ;       movlw   b'0011'
                      00598 ;       movwf   frontbinCounter     ;testing with value of 5 bins
                      00599 ;       movwf   backbinCounter
                      00600 ;       
                      00601 ;;      decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00602 ;;      goto        $+2
                      00603 ;;      return
                      00604 ;;      
                      00605 ;       call        ScanFrontContainer
                      00606 ;       btfss       frontstickerValues,3        ; check the ith bucket value and if it is clear,
                      00607 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00608 ;       btfsc       frontstickerValues,3
                      00609 ;       call        PrintWhiteSticker
                      00610 ;       ;call       Switch_Lines
                      00611 ;       call        ScanBackContainer
                      00612 ;       btfss       backstickerValues,3 ; check the ith bucket value and if it is clear,
                      00613 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00614 ;       btfsc       backstickerValues,3
                      00615 ;       call        PrintWhiteSticker
                      00616 ;       ;call       Switch_Lines
                      00617 ;               
                      00618 ;       movlw   b'0100'
                      00619 ;       movwf   frontbinCounter     ;testing with value of 5 bins
                      00620 ;       movwf   backbinCounter
                      00621 ;       
                      00622 ;;      
                      00623 ;;      decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00624 ;;      goto        $+2
                      00625 ;;      return
                      00626 ;;      
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00627 ;       btfss       frontstickerValues,4        ; check the ith bucket value and if it is clear,
                      00628 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00629 ;       btfsc       frontstickerValues,4
                      00630 ;       call        PrintWhiteSticker
                      00631 ;       ;call       Switch_Lines
                      00632 ;       btfss       backstickerValues,4 ; check the ith bucket value and if it is clear,
                      00633 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00634 ;       btfsc       backstickerValues,4
                      00635 ;       call        PrintWhiteSticker
                      00636 ;       ;call       Switch_Lines
                      00637 
                      00638         
                      00639 ;       decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00640 ;       goto        $+2
                      00641 ;       return
                      00642 ;       
                      00643 ;       btfss       frontstickerValues,5        ; check the ith bucket value and if it is clear,
                      00644 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00645 ;       btfsc       frontstickerValues,5
                      00646 ;       call        PrintWhiteSticker
                      00647 ;       ;call       Switch_Lines
                      00648 ;       btfss       backstickerValues,5 ; check the ith bucket value and if it is clear,
                      00649 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00650 ;       btfsc       backstickerValues,5
                      00651 ;       call        PrintWhiteSticker
                      00652 ;       ;call       Switch_Lines
                      00653 ;       
                      00654 ;       decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00655 ;       goto        $+2
                      00656 ;       return
                      00657 ;       
                      00658 ;       btfss       frontstickerValues,6        ; check the ith bucket value and if it is clear,
                      00659 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00660 ;       btfsc       frontstickerValues,6
                      00661 ;       call        PrintWhiteSticker
                      00662 ;       ;call       Switch_Lines
                      00663 ;       btfss       backstickerValues,6 ; check the ith bucket value and if it is clear,
                      00664 ;       call        PrintBlackSticker   ; print a black sticker on the thing
                      00665 ;       btfsc       backstickerValues,6
                      00666 ;       call        PrintWhiteSticker
                      00667 ;       ;call       Switch_Lines
                      00668 ;       
                      00669 ;       decfsz      frontbinCounter             ;decrements bin counter to know how much to print
                      00670 ;       goto        $+2
                      00671 ;       return
                      00672         
013A   0008           00673         return
                      00674         
013B                  00675 BinLocationsDisplay
013B   2???           00676         call        Clear_Display
                      00677         Display     BinLocations
  0000                    M                 local   loop_
  0000                    M                 local   end_
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

013C   01B3               M                 clrf    Table_Counter
013D   0103               M                 clrw            
013E   0833               M loop_   movf    Table_Counter,W
013F   2???               M                 call    BinLocations
0140   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0141   1903               M                 btfsc   STATUS,Z
0142   2???               M                         goto    end_
0143   2???               M                 call    WR_DATA
0144   0AB3               M                 incf    Table_Counter,F
0145   2???               M                 goto    loop_
0146                      M end_
                      00678                 
0146   0008           00679         return
                      00680 
0147                  00681 OperationTimeDisplay
0147   2???           00682         call        Clear_Display
                      00683         Display     OperationTime
  0000                    M                 local   loop_
  0000                    M                 local   end_
0148   01B3               M                 clrf    Table_Counter
0149   0103               M                 clrw            
014A   0833               M loop_   movf    Table_Counter,W
014B   2???               M                 call    OperationTime
014C   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
014D   1903               M                 btfsc   STATUS,Z
014E   2???               M                         goto    end_
014F   2???               M                 call    WR_DATA
0150   0AB3               M                 incf    Table_Counter,F
0151   2???               M                 goto    loop_
0152                      M end_
                      00684                 
0152   0008           00685         return
                      00686         
0153                  00687 ShiftLeft
0153   3018           00688         movlw           b'00011000'             ;Move to the left
0154   2???           00689         call            WR_INS
0155   0008           00690         return
                      00691 
0156   2???           00692         goto Main
                      00693         
0157                  00694 RTCDisplay
0157   2???           00695         call    show_RTC
                      00696         
0158   1886           00697         btfsc           PORTB,1     ;Wait until data is available from the keypad
0159   0008           00698         return
015A   1886           00699         btfsc           PORTB,1     ;Wait until data is available from the keypad
015B   0008           00700         return
015C   1886           00701         btfsc           PORTB,1     ;Wait until data is available from the keypad
015D   0008           00702         return
015E   1886           00703         btfsc           PORTB,1     ;Wait until data is available from the keypad
015F   0008           00704         return
0160   2???           00705         goto        RTCDisplay
                      00706         
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00707 ;***************************************
                      00708 ; Look up table
                      00709 ;***************************************
                      00710     
0161                  00711 Welcome_Msg
                      00712         
                      00713         ;Change Page
0161   00BA           00714         movwf   Temp
0162   30??           00715         movlw   HIGH Welcome_MsgEntries
0163   008A           00716         movwf   PCLATH
0164   083A           00717         movf    Temp,w
0165   3E??           00718         addlw   LOW Welcome_MsgEntries
0166   1803           00719         btfsc   STATUS,C
0167   0A8A           00720             incf    PCLATH,f
0168   0082           00721         movwf   PCL     
0169   0782           00722         addwf    PCL,F
016A                  00723 Welcome_MsgEntries
016A   3450 3472 3465 00724         dt        "Press 1 to start robot", 0
       3473 3473 3420 
       3431 3420 3474 
       346F 3420 3473 
       3474 3461 3472 
       3474 3420 3472 
       346F 3462 346F 
       3474 3400 
                      00725         
0181                  00726 Operation
                      00727         
                      00728         ;Change Page
0181   00BA           00729         movwf    Temp
0182   30??           00730         movlw   HIGH OperationEntries
0183   008A           00731         movwf   PCLATH
0184   083A           00732         movf    Temp,w
0185   3E??           00733         addlw   LOW OperationEntries
0186   1803           00734         btfsc   STATUS,C
0187   0A8A           00735             incf    PCLATH,f
0188   0082           00736         movwf   PCL
0189   0782           00737         addwf    PCL,F
018A                  00738 OperationEntries
018A   344F 3470 3465 00739         dt        "Operating...",0
       3472 3461 3474 
       3469 346E 3467 
       342E 342E 342E 
       3400 
                      00740 
0197                  00741 WantResults
                      00742         
                      00743         ;Change Page
0197   00BA           00744         movwf    Temp
0198   30??           00745         movlw   HIGH WantResultsEntries
0199   008A           00746         movwf   PCLATH
019A   083A           00747         movf    Temp,w
019B   3E??           00748         addlw   LOW WantResultsEntries
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

019C   1803           00749         btfsc   STATUS,C
019D   0A8A           00750             incf    PCLATH,f
019E   0082           00751         movwf   PCL
019F   0782           00752         addwf    PCL,F
01A0                  00753 WantResultsEntries
01A0   3450 3472 3465 00754         dt        "Press 2 to display results",0
       3473 3473 3420 
       3432 3420 3474 
       346F 3420 3464 
       3469 3473 3470 
       346C 3461 3479 
       3420 3472 3465 
       3473 3475 346C 
       3474 3473 3400 
                      00755 
                      00756 
01BB                  00757 WantRotate
                      00758                 
                      00759         ;Change Page
01BB   00BA           00760         movwf    Temp
01BC   30??           00761         movlw   HIGH WantRotateEntries
01BD   008A           00762         movwf   PCLATH
01BE   083A           00763         movf    Temp,w
01BF   3E??           00764         addlw   LOW WantRotateEntries
01C0   1803           00765         btfsc   STATUS,C
01C1   0A8A           00766             incf    PCLATH,f
01C2   0082           00767         movwf   PCL
01C3   0782           00768         addwf    PCL,F
01C4                  00769 WantRotateEntries
01C4   3450 3472 3465 00770         dt        "Press A to rotate screen",0
       3473 3473 3420 
       3441 3420 3474 
       346F 3420 3472 
       346F 3474 3461 
       3474 3465 3420 
       3473 3463 3472 
       3465 3465 346E 
       3400 
                      00771         
01DD                  00772 Results1 
                      00773                 
                      00774         ;Change Page
01DD   00BA           00775         movwf    Temp
01DE   30??           00776         movlw   HIGH Results1Entries
01DF   008A           00777         movwf   PCLATH
01E0   083A           00778         movf    Temp,w
01E1   3E??           00779         addlw   LOW Results1Entries
01E2   1803           00780         btfsc   STATUS,C
01E3   0A8A           00781             incf    PCLATH,f
01E4   0082           00782         movwf   PCL
01E5   0782           00783         addwf    PCL,F
01E6                  00784 Results1Entries 
01E6   3434 343A 3420 00785         dt        "4: number of bins, 5: sticker status",0
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       346E 3475 346D 
       3462 3465 3472 
       3420 346F 3466 
       3420 3462 3469 
       346E 3473 342C 
       3420 3435 343A 
       3420 3473 3474 
       3469 3463 346B 
       3465 3472 3420 
       3473 3474 3461 
       3474 3475 3473 
       3400 
                      00786         
020B                  00787 Results2
                      00788         
                      00789         ;Change Page
020B   00BA           00790         movwf    Temp
020C   30??           00791         movlw   HIGH Results2Entries
020D   008A           00792         movwf   PCLATH
020E   083A           00793         movf    Temp,w
020F   3E??           00794         addlw   LOW Results2Entries
0210   1803           00795         btfsc   STATUS,C
0211   0A8A           00796             incf    PCLATH,f
0212   0082           00797         movwf   PCL     
0213   0782           00798         addwf    PCL,F
0214                  00799 Results2Entries 
0214   3436 343A 3420 00800         dt        "6: bin locations, 7: operation time",0
       3462 3469 346E 
       3420 346C 346F 
       3463 3461 3474 
       3469 346F 346E 
       3473 342C 3420 
       3437 343A 3420 
       346F 3470 3465 
       3472 3461 3474 
       3469 346F 346E 
       3420 3474 3469 
       346D 3465 3400 
                      00801         
0238                  00802 Bins
                      00803         ;Change Page
0238   00BA           00804         movwf    Temp
0239   30??           00805         movlw   HIGH BinsEntries
023A   008A           00806         movwf   PCLATH
023B   083A           00807         movf    Temp,w
023C   3E??           00808         addlw   LOW BinsEntries
023D   1803           00809         btfsc   STATUS,C
023E   0A8A           00810             incf    PCLATH,f
023F   0082           00811         movwf   PCL     
0240   0782           00812         addwf    PCL,F
0241                  00813 BinsEntries
0241   3434 3420 3462 00814         dt        "4 bins in total",0
       3469 346E 3473 
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3420 3469 346E 
       3420 3474 346F 
       3474 3461 346C 
       3400 
                      00815         
0251                  00816 StickerStatus
                      00817         
                      00818         ;Change Page
0251   00BA           00819         movwf    Temp
0252   30??           00820         movlw   HIGH StickerStatusEntries
0253   008A           00821         movwf   PCLATH
0254   083A           00822         movf    Temp,w
0255   3E??           00823         addlw   LOW StickerStatusEntries
0256   1803           00824         btfsc   STATUS,C
0257   0A8A           00825             incf    PCLATH,f
0258   0082           00826         movwf   PCL     
0259   0782           00827         addwf    PCL,F
025A                  00828 StickerStatusEntries
025A   3442 3442 3457 00829         dt        "BBWBWWWB",0
       3442 3457 3457 
       3457 3442 3400 
                      00830         
0263                  00831 BinLocations
                      00832         ;Change Page
0263   00BA           00833         movwf    Temp
0264   30??           00834         movlw   HIGH BinLocationsEntries
0265   008A           00835         movwf   PCLATH
0266   083A           00836         movf    Temp,w
0267   3E??           00837         addlw   LOW BinLocationsEntries
0268   1803           00838         btfsc   STATUS,C
0269   0A8A           00839             incf    PCLATH,f
026A   0082           00840         movwf   PCL     
026B   0782           00841         addwf    PCL,F
026C                  00842 BinLocationsEntries
026C   344E 346F 3474 00843         dt        "Not receiving anything",0
       3420 3472 3465 
       3463 3465 3469 
       3476 3469 346E 
       3467 3420 3461 
       346E 3479 3474 
       3468 3469 346E 
       3467 3400 
                      00844         
0283                  00845 OperationTime
                      00846         ;Change Page
0283   00BA           00847         movwf    Temp
0284   30??           00848         movlw   HIGH OperationTimeEntries
0285   008A           00849         movwf   PCLATH
0286   083A           00850         movf    Temp,w
0287   3E??           00851         addlw   LOW OperationTimeEntries
0288   1803           00852         btfsc   STATUS,C
0289   0A8A           00853             incf    PCLATH,f
028A   0082           00854         movwf   PCL     
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

028B   0782           00855         addwf    PCL,F
028C                  00856 OperationTimeEntries
028C   3454 3441 344B 00857         dt        "TAKING IN 5 VOLTS",0
       3449 344E 3447 
       3420 3449 344E 
       3420 3435 3420 
       3456 344F 344C 
       3454 3453 3400 
                      00858         
029E                  00859 ReceivedInput
                      00860         ;Change Page
029E   00BA           00861         movwf    Temp
029F   30??           00862         movlw   HIGH ReceivedInputEntries
02A0   008A           00863         movwf   PCLATH
02A1   083A           00864         movf    Temp,w
02A2   3E??           00865         addlw   LOW ReceivedInputEntries
02A3   1803           00866         btfsc   STATUS,C
02A4   0A8A           00867             incf    PCLATH,f
02A5   0082           00868         movwf   PCL     
02A6   0782           00869         addwf    PCL,F
02A7                  00870 ReceivedInputEntries
02A7   3474 3461 346B 00871         dt        "takin in large value",0
       3469 346E 3420 
       3469 346E 3420 
       346C 3461 3472 
       3467 3465 3420 
       3476 3461 346C 
       3475 3465 3400 
                      00872         
02BC                  00873 SmallValueInput
                      00874         ;Change Page
02BC   00BA           00875         movwf    Temp
02BD   30??           00876         movlw   HIGH SmallValueInputEntries
02BE   008A           00877         movwf   PCLATH
02BF   083A           00878         movf    Temp,w
02C0   3E??           00879         addlw   LOW SmallValueInputEntries
02C1   1803           00880         btfsc   STATUS,C
02C2   0A8A           00881             incf    PCLATH,f
02C3   0082           00882         movwf   PCL     
02C4   0782           00883         addwf    PCL,F
02C5                  00884 SmallValueInputEntries
02C5   3473 346D 3461 00885         dt        "small value",0
       346C 346C 3420 
       3476 3461 346C 
       3475 3465 3400 
                      00886         
02D1                  00887 DectoChar
                      00888         
                      00889         ;Change Page
02D1   00BA           00890         movwf   Temp
02D2   30??           00891         movlw   HIGH DectoCharEntries
02D3   008A           00892         movwf   PCLATH
02D4   083A           00893         movf    Temp,w
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02D5   3E??           00894         addlw   LOW DectoCharEntries
02D6   1803           00895         btfsc   STATUS,C
02D7   0A8A           00896             incf    PCLATH,f
02D8   0082           00897         movwf   PCL     
02D9   0782           00898         addwf    PCL,F
02DA                  00899 DectoCharEntries
02DA   3430 3431 3432 00900         dt        "0123456789",  0
       3433 3434 3435 
       3436 3437 3438 
       3439 3400 
                      00901         
02E5                  00902 StickerColours
                      00903         
                      00904         ;Change Page
02E5   00BA           00905         movwf   Temp
02E6   30??           00906         movlw   HIGH StickerColoursEntries
02E7   008A           00907         movwf   PCLATH
02E8   083A           00908         movf    Temp,w
02E9   3E??           00909         addlw   LOW StickerColoursEntries
02EA   1803           00910         btfsc   STATUS,C
02EB   0A8A           00911             incf    PCLATH,f
02EC   0082           00912         movwf   PCL     
02ED   0782           00913         addwf    PCL,F
02EE                  00914 StickerColoursEntries
02EE   3442 3457 3400 00915         dt        "BW",  0
                      00916         
                      00917 
                      00918 ;***************************************
                      00919 ; LCD control
                      00920 ;***************************************
02F1                  00921 Switch_Lines
02F1   30C0           00922                 movlw   B'11000000'
02F2   2???           00923                 call    WR_INS
02F3   0008           00924                 return
                      00925 
02F4                  00926 Clear_Display
02F4   3001           00927                 movlw   B'00000001'
02F5   2???           00928                 call    WR_INS
02F6   0008           00929                 return
                      00930 
                      00931 ;***************************************
                      00932 ; Delay 0.5s
                      00933 ;***************************************
02F7                  00934 HalfS   
  0000                00935         local   HalfS_0
02F7   3088           00936       movlw 0x88
02F8   00B0           00937       movwf COUNTH
02F9   30BD           00938       movlw 0xBD
02FA   00B1           00939       movwf COUNTM
02FB   3003           00940       movlw 0x03
02FC   00B2           00941       movwf COUNTL
                      00942 
02FD                  00943 HalfS_0
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02FD   0BB0           00944       decfsz COUNTH, f
02FE   2???           00945       goto   $+2
02FF   0BB1           00946       decfsz COUNTM, f
0300   2???           00947       goto   $+2
0301   0BB2           00948       decfsz COUNTL, f
0302   2???           00949       goto   HalfS_0
                      00950 
0303   2???           00951       goto $+1
0304   0000           00952       nop
0305   0000           00953       nop
0306   0008           00954                 return
                      00955 
                      00956     
                      00957 ;************************************
                      00958 ; RTC Sublabels
                      00959 ;************************************
                      00960     
0307                  00961 show_RTC
                      00962                 ;clear LCD screen
0307   3001           00963                 movlw   b'00000001'
0308   2???           00964                 call    WR_INS
                      00965 
                      00966                 ;Get year
0309   3032           00967                 movlw   "2"                             ;First line shows 20**/**/**
030A   2???           00968                 call    WR_DATA
030B   3030           00969                 movlw   "0"
030C   2???           00970                 call    WR_DATA
                      00971                 rtc_read        0x06            ;Read Address 0x06 from DS1307---year
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
030D   3006               M         movlw   0x06
030E   1283 1303          M         banksel 0x73
0310   00F3               M         movwf   0x73
0311   2???               M         call    read_rtc
0312   1283 1303          M         banksel 0x75
0314   0875               M         movf    0x75,w
0315   2???               M         call    rtc_convert   
0316   0877           00972                 movfw   0x77
0317   2???           00973                 call    WR_DATA
0318   0878           00974                 movfw   0x78
0319   2???           00975                 call    WR_DATA
                      00976 
031A   302F           00977                 movlw   "/"
031B   2???           00978                 call    WR_DATA
                      00979 
                      00980                 ;Get month
                      00981                 rtc_read        0x05            ;Read Address 0x05 from DS1307---month
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
031C   3005               M         movlw   0x05
031D   1283 1303          M         banksel 0x73
031F   00F3               M         movwf   0x73
0320   2???               M         call    read_rtc
0321   1283 1303          M         banksel 0x75
0323   0875               M         movf    0x75,w
0324   2???               M         call    rtc_convert   
0325   0877           00982                 movfw   0x77
0326   2???           00983                 call    WR_DATA
0327   0878           00984                 movfw   0x78
0328   2???           00985                 call    WR_DATA
                      00986 
0329   302F           00987                 movlw   "/"
032A   2???           00988                 call    WR_DATA
                      00989 
                      00990                 ;Get day
                      00991                 rtc_read        0x04            ;Read Address 0x04 from DS1307---day
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
032B   3004               M         movlw   0x04
032C   1283 1303          M         banksel 0x73
032E   00F3               M         movwf   0x73
032F   2???               M         call    read_rtc
0330   1283 1303          M         banksel 0x75
0332   0875               M         movf    0x75,w
0333   2???               M         call    rtc_convert   
0334   0877           00992                 movfw   0x77
0335   2???           00993                 call    WR_DATA
0336   0878           00994                 movfw   0x78
0337   2???           00995                 call    WR_DATA
                      00996 
0338   30C0           00997                 movlw   B'11000000'             ;Next line displays (hour):(min):(sec) **:**:**
0339   2???           00998                 call    WR_INS
                      00999 
                      01000                 ;Get hour
                      01001                 rtc_read        0x02            ;Read Address 0x02 from DS1307---hour
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
033A   3002               M         movlw   0x02
033B   1283 1303          M         banksel 0x73
033D   00F3               M         movwf   0x73
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

033E   2???               M         call    read_rtc
033F   1283 1303          M         banksel 0x75
0341   0875               M         movf    0x75,w
0342   2???               M         call    rtc_convert   
0343   0877           01002                 movfw   0x77
0344   2???           01003                 call    WR_DATA
0345   0878           01004                 movfw   0x78
0346   2???           01005                 call    WR_DATA
0347   303A           01006                 movlw                   ":"
0348   2???           01007                 call    WR_DATA
                      01008 
                      01009                 ;Get minute             
                      01010                 rtc_read        0x01            ;Read Address 0x01 from DS1307---min
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
0349   3001               M         movlw   0x01
034A   1283 1303          M         banksel 0x73
034C   00F3               M         movwf   0x73
034D   2???               M         call    read_rtc
034E   1283 1303          M         banksel 0x75
0350   0875               M         movf    0x75,w
0351   2???               M         call    rtc_convert   
0352   0877           01011                 movfw   0x77
0353   2???           01012                 call    WR_DATA
0354   0878           01013                 movfw   0x78
0355   2???           01014                 call    WR_DATA         
0356   303A           01015                 movlw                   ":"
0357   2???           01016                 call    WR_DATA
                      01017                 
                      01018                 ;Get seconds
                      01019                 rtc_read        0x00            ;Read Address 0x00 from DS1307---seconds
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
0358   3000               M         movlw   0x00
0359   1283 1303          M         banksel 0x73
035B   00F3               M         movwf   0x73
035C   2???               M         call    read_rtc
035D   1283 1303          M         banksel 0x75
035F   0875               M         movf    0x75,w
0360   2???               M         call    rtc_convert   
0361   0877           01020                 movfw   0x77
0362   2???           01021                 call    WR_DATA
0363   0878           01022                 movfw   0x78
0364   2???           01023                 call    WR_DATA
                      01024                 
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0365   2???           01025                 call    OneS                    ;Delay for exactly one seconds and read DS1307 again
                      01026                 ;goto   show_RTC                ;use return instead to check for key press
0366   0008           01027                 return
                      01028 
                      01029 ;***************************************
                      01030 ; Setup RTC with time defined by user
                      01031 ;***************************************
0367                  01032 set_rtc_time
                      01033 
                      01034                 rtc_resetAll    ;reset rtc
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          Resets all the time keeping registers on the RTC to zero
0367   1283 1303          M         banksel         0x74
0369   01F4               M         clrf            0x74
036A   1283 1303          M         banksel         0x73
036C   01F3               M         clrf            0x73
036D   2???               M     call        write_rtc               ;Write 0 to Seconds
036E   1283 1303          M         banksel         0x73
0370   0AF3               M     incf        0x73                    ;Set register address to 1
0371   2???               M         call            write_rtc
0372   1283 1303          M         banksel         0x73
0374   0AF3               M     incf        0x73                    ;Set register address to 2
0375   2???               M         call            write_rtc
0376   1283 1303          M         banksel         0x73
0378   0AF3               M     incf        0x73                    ;Set register address to 3
0379   2???               M         call            write_rtc
037A   1283 1303          M         banksel         0x73
037C   0AF3               M     incf        0x73                    ;Set register address to 4
037D   2???               M         call            write_rtc
037E   1283 1303          M         banksel         0x73
0380   0AF3               M     incf        0x73                    ;Set register address to 5
0381   2???               M         call            write_rtc
0382   1283 1303          M         banksel         0x73
0384   0AF3               M     incf        0x73                    ;Set register address to 6
0385   2???               M         call            write_rtc
                      01035 
                      01036                 rtc_set 0x00,   B'10000000'
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
0386   1283 1303          M         banksel 0x73
0388   3000               M         movlw   0x00
0389   00F3               M         movwf   0x73
038A   1283 1303          M         banksel 0x74
038C   3080               M         movlw   B'10000000'
038D   00F4               M         movwf   0x74    
038E   2???               M         call    write_rtc
                      01037 
                      01038                 ;set time 
                      01039                 rtc_set 0x06,   B'00010110'             ; Year
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
038F   1283 1303          M         banksel 0x73
0391   3006               M         movlw   0x06
0392   00F3               M         movwf   0x73
0393   1283 1303          M         banksel 0x74
0395   3016               M         movlw   B'00010110'
0396   00F4               M         movwf   0x74    
0397   2???               M         call    write_rtc
                      01040                 rtc_set 0x05,   B'00000010'             ; Month
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
0398   1283 1303          M         banksel 0x73
039A   3005               M         movlw   0x05
039B   00F3               M         movwf   0x73
039C   1283 1303          M         banksel 0x74
039E   3002               M         movlw   B'00000010'
039F   00F4               M         movwf   0x74    
03A0   2???               M         call    write_rtc
                      01041                 rtc_set 0x04,   B'00010110'             ; Date
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03A1   1283 1303          M         banksel 0x73
03A3   3004               M         movlw   0x04
03A4   00F3               M         movwf   0x73
03A5   1283 1303          M         banksel 0x74
03A7   3016               M         movlw   B'00010110'
03A8   00F4               M         movwf   0x74    
03A9   2???               M         call    write_rtc
                      01042                 rtc_set 0x03,   B'00100001'             ; Day
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03AA   1283 1303          M         banksel 0x73
03AC   3003               M         movlw   0x03
03AD   00F3               M         movwf   0x73
03AE   1283 1303          M         banksel 0x74
03B0   3021               M         movlw   B'00100001'
03B1   00F4               M         movwf   0x74    
03B2   2???               M         call    write_rtc
                      01043                 rtc_set 0x02,   B'00000001'             ; Hours
                          M ;input:         addliteral: value of address
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03B3   1283 1303          M         banksel 0x73
03B5   3002               M         movlw   0x02
03B6   00F3               M         movwf   0x73
03B7   1283 1303          M         banksel 0x74
03B9   3001               M         movlw   B'00000001'
03BA   00F4               M         movwf   0x74    
03BB   2???               M         call    write_rtc
                      01044                 rtc_set 0x01,   B'00110101'             ; Minutes
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03BC   1283 1303          M         banksel 0x73
03BE   3001               M         movlw   0x01
03BF   00F3               M         movwf   0x73
03C0   1283 1303          M         banksel 0x74
03C2   3035               M         movlw   B'00110101'
03C3   00F4               M         movwf   0x74    
03C4   2???               M         call    write_rtc
                      01045                 rtc_set 0x00,   B'01010000'             ; Seconds
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03C5   1283 1303          M         banksel 0x73
03C7   3000               M         movlw   0x00
03C8   00F3               M         movwf   0x73
03C9   1283 1303          M         banksel 0x74
03CB   3050               M         movlw   B'01010000'
03CC   00F4               M         movwf   0x74    
03CD   2???               M         call    write_rtc
03CE   0008           01046                 return
                      01047 
                      01048 
                      01049 ;***************************************
                      01050 ; Delay 1s
                      01051 ;***************************************
03CF                  01052 OneS
  0000                01053                 local   OneS_0
03CF   3010           01054       movlw 0x10
03D0   00B0           01055       movwf COUNTH
03D1   307A           01056       movlw 0x7A
03D2   00B1           01057       movwf COUNTM
03D3   3006           01058       movlw 0x06
03D4   00B2           01059       movwf COUNTL
                      01060 
03D5                  01061 OneS_0
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03D5   0BB0           01062       decfsz COUNTH, f
03D6   2???           01063       goto   $+2
03D7   0BB1           01064       decfsz COUNTM, f
03D8   2???           01065       goto   $+2
03D9   0BB2           01066       decfsz COUNTL, f
03DA   2???           01067       goto   OneS_0
                      01068 
03DB   2???           01069       goto $+1
03DC   0000           01070       nop
03DD   0000           01071       nop
03DE   0008           01072                 return
                      01073 
                      01074 ;***************************************
                      01075 ; Print sticker values
                      01076 ;***************************************
03DF                  01077 PrintBlackSticker
03DF   3000           01078         movlw       b'0'
03E0   2???           01079         call        StickerColours
03E1   2???           01080         call        WR_DATA
03E2   0008           01081         return
                      01082 
03E3                  01083 PrintWhiteSticker
03E3   3001           01084         movlw       b'1'
03E4   2???           01085         call        StickerColours
03E5   2???           01086         call        WR_DATA
03E6   0008           01087         return
                      01088         
                      01089 ;***************************************
                      01090 ; Number to Colour
                      01091 ;***************************************
                      01092 PrintCol macro  number
                      01093         movlw       0x80
                      01094         call        WR_INS
                      01095         call        lcdLongDelay
                      01096         movf        number ,W
                      01097         call        BinCol
                      01098         call        WR_DATA
                      01099         endm            
                      01100 
                      01101     
3F72                  01102         END
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
BinLocations                      00000263
BinLocationsDisplay               0000013B
BinLocationsEntries               0000026C
Bins                              00000238
BinsDisplay                       00000106
BinsEntries                       00000241
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

CKP                               00000004
COUNTH                            00000030
COUNTL                            00000032
COUNTM                            00000031
CREN                              00000004
CSRC                              00000007
ChooseIR1                         000000B2
ChooseIR2                         000000B6
Clear_Display                     000002F4
ClrLCD                            00000000
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DCMotor                           PORTA,3
D_A                               00000005
D_NOT_A                           00000005
DectoChar                         000002D1
DectoCharEntries                  000002DA
Display                           
E                                 PORTD,3
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
HalfS                             000002F7
Hund                              00000041
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IR1                               PORTA,0
IR2                               PORTA,1
IRP                               00000007
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

InitLCD                           00000000
Key                               
KeypadandLCD                      00000062
LCDConversion                     00000093
LCD_DELAY                         
Lb1                               00000022
Lb2                               00000026
Lb3                               0000002A
Lb4                               0000002E
ListDisplay                       000000EF
Location1                         0000003B
Location2                         0000003C
Main                              0000005D
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NumH                              0000003D
NumL                              0000003E
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
OneS                              000003CF
Ones                              00000043
Operation                         00000181
OperationDisplay                  000000CF
OperationEntries                  0000018A
OperationTime                     00000283
OperationTimeDisplay              00000147
OperationTimeEntries              0000028C
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
PrintBlackSticker                 000003DF
PrintCol                          
PrintNumber                       
PrintWhiteSticker                 000003E3
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RS                                PORTD,2
RSEN                              00000001
RTCDisplay                        00000157
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
ReceivedInput                     0000029E
ReceivedInputEntries              000002A7
Results1                          000001DD
Results1Entries                   000001E6
Results2                          0000020B
Results2Entries                   00000214
Rotation                          
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
ScanBackContainer                 000000C4
ScanFrontContainer                000000BA
ShiftLeft                         00000153
SmallValueInput                   000002BC
SmallValueInputEntries            000002C5
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

StickerColours                    000002E5
StickerColoursEntries             000002EE
StickerDisplay                    00000112
StickerStatus                     00000251
StickerStatusEntries              0000025A
Switch_Lines                      000002F1
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
Table_Counter                     00000033
Temp                              0000003A
TenK                              0000003F
Tens                              00000042
Thou                              00000040
UA                                00000001
US                                PORTA,2
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WR_DATA                           00000000
WR_INS                            00000000
WantResults                       00000197
WantResultsEntries                000001A0
WantRotate                        000001BB
WantRotateEntries                 000001C4
Welcome_Msg                       00000161
Welcome_MsgEntries                0000016A
Z                                 00000002
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 39


SYMBOL TABLE
  LABEL                             VALUE 

_.org_0_0063                      00000063
_.org_0_0090                      00000090
_.org_0_0096                      00000096
_.org_0_00BC                      000000BC
_.org_0_00C6                      000000C6
_.org_0_02FE                      000002FE
_.org_0_0300                      00000300
_.org_0_0303                      00000303
_.org_0_03D6                      000003D6
_.org_0_03D8                      000003D8
_.org_0_03DB                      000003DB
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
backbinCounter                    00000049
backstickerValues                 00000047
bin16_BCD                         00000001
MPASM 5.65                          MAIN.ASM   2-21-2016  21:54:19         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

binCounter                        0000004A
com                               00000037
dat                               00000038
distanceMoved                     00000044
frontbinCounter                   00000048
frontstickerValues                00000046
goback                            00000092
i2c_common_setup                  00000000
init                              00000034
isColumnThere                     00000045
lcd_d1                            00000035
lcd_d2                            00000036
lcd_tmp                           00000034
read_rtc                          00000000
rtc_convert                       00000000
rtc_read                          
rtc_resetAll                      
rtc_set                           
set_rtc_time                      00000367
show_RTC                          00000307
temp                              00000039
write_rtc                         00000000

Errors   :     0
Warnings :     1 reported,     0 suppressed
Messages :     0 reported,    16 suppressed

