MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*******************************************************************
                      00002 ; Keypad/LCD Test Code
                      00003 ; Assembler : mpasm.exe
                      00004 ; Linker    : mplink.exe
                      00005 ; Written By : Kevin Lam
                      00006 ;*******************************************************************
                      00007 
                      00008       list p=16f877                 ; list directive to define processor
                      00009       #include <p16f877.inc>        ; processor specific variable definitions
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Dec 08 2015
                      00005 ;  MPASM PIC16F877 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2015 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00541         LIST
2007   3F72           00010       __CONFIG _CP_OFF & _WDT_OFF & _BODEN_ON & _PWRTE_ON & _HS_OSC & _WRT_ENABLE_ON & _CPD_OFF & _LVP_O
                            FF
                      00011       Errorlevel -302               ; switches off message [302] Register in operand not in bank 0
                      00012       Errorlevel -305
                      00013 
                      00014       #include <lcd.inc>                           ;Import LCD control functions from lcd.asm
  0000                00001         extern  InitLCD,WR_INS,WR_DATA,ClrLCD
                      00015         #include <rtc_macros.inc>
                      00001         ;External labels
  0000                00002         extern  write_rtc,read_rtc,rtc_convert,i2c_common_setup
                      00003 
                      00004 ;RTC Macros;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      00005 
                      00006 rtc_resetAll    macro
                      00007 ;input:         none
                      00008 ;output:        none
                      00009 ;desc:          Resets all the time keeping registers on the RTC to zero
                      00010         banksel         0x74
                      00011         clrf            0x74
                      00012         banksel         0x73
                      00013         clrf            0x73
                      00014     call        write_rtc               ;Write 0 to Seconds
                      00015         banksel         0x73
                      00016     incf        0x73                    ;Set register address to 1
                      00017         call            write_rtc
                      00018         banksel         0x73
                      00019     incf        0x73                    ;Set register address to 2
                      00020         call            write_rtc
                      00021         banksel         0x73
                      00022     incf        0x73                    ;Set register address to 3
                      00023         call            write_rtc
                      00024         banksel         0x73
                      00025     incf        0x73                    ;Set register address to 4
                      00026         call            write_rtc
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00027         banksel         0x73
                      00028     incf        0x73                    ;Set register address to 5
                      00029         call            write_rtc
                      00030         banksel         0x73
                      00031     incf        0x73                    ;Set register address to 6
                      00032         call            write_rtc
                      00033         endm
                      00034 
                      00035 rtc_set         macro   addliteral,datliteral
                      00036 ;input:         addliteral: value of address
                      00037 ;                       datliteral: value of data
                      00038 ;output:        none
                      00039 ;desc:          loads the data in datliteral into the 
                      00040 ;                       address specified by addliteral in the RTC
                      00041         banksel 0x73
                      00042         movlw   addliteral
                      00043         movwf   0x73
                      00044         banksel 0x74
                      00045         movlw   datliteral
                      00046         movwf   0x74    
                      00047         call    write_rtc
                      00048         endm
                      00049 
                      00050 rtc_read        macro   addliteral
                      00051 ;input:         addliteral
                      00052 ;output:        0x75, 0x77, 0x78
                      00053 ;desc:          From the selected register in the RTC, read the data
                      00054 ;                       and load it into 0x75. 0x75 is also converted into 
                      00055 ;                       ASCII characters and the tens digit is placed into
                      00056 ;                       0x77 and the ones digit is placed in 0x78
                      00057         movlw   addliteral
                      00058         banksel 0x73
                      00059         movwf   0x73
                      00060         call    read_rtc
                      00061         banksel 0x75
                      00062         movf    0x75,w
                      00063         call    rtc_convert   
                      00064         endm
                      00016 
                      00017         udata_shr
                      00018 
                      00019       
                      00020       
                      00021         cblock  0x30
  00000030            00022                 COUNTH
  00000031            00023                 COUNTM  
  00000032            00024                 COUNTL  
  00000033            00025                 Table_Counter
  00000034            00026                 lcd_tmp 
  00000035            00027                 lcd_d1
  00000036            00028                 lcd_d2
  00000037            00029                 com     
  00000038            00030                 dat
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000039            00031                 temp
  0000003A            00032                 Temp
  0000003B            00033                 Location1
  0000003C            00034                 Location2 
  0000003D            00035                 NumH
  0000003E            00036                 NumL
  0000003F            00037                 TenK
  00000040            00038                 Thou
  00000041            00039                 Hund
  00000042            00040                 Tens
  00000043            00041                 Ones
  00000044            00042                 distanceMoved
  00000045            00043                 isColumnThere
  00000046            00044                 frontstickerValues
  00000047            00045                 backstickerValues
  00000048            00046                 frontbinCounter
  00000049            00047                 backbinCounter
  0000004A            00048                 binCounter
                      00049         endc    
                      00050 
                      00051         ;Declare constants for pin assignments (LCD on PORTD)
                      00052                 #define RS      PORTD,2
                      00053                 #define E       PORTD,3
                      00054                 #define IR1     PORTA,0
                      00055                 #define IR2     PORTA,1
                      00056                 #define US      PORTA,2
                      00057                 #define DCMotor PORTA,3
                      00058                 
                      00059 ;distanceMoved  equ     b'0'
                      00060 
                      00061          ORG       0x0000     ;RESET vector must always be at 0x00
0000   2???           00062          goto      init       ;Just jump to the main code section.
                      00063          
                      00064          ;ORG      0x100        ;this command is sketchy
                      00065          
                      00066 
                      00067 Key      macro  value, subroutine
                      00068          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
                      00069          andlw          0x0F
                      00070          xorlw          value
                      00071          btfsc          STATUS, Z
                      00072          call           subroutine
                      00073         endm
                      00074 
                      00075 Rotation macro  value
                      00076          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
                      00077          andlw          0x0F
                      00078          xorlw          value
                      00079          btfsc          STATUS, Z
                      00080          call           ShiftLeft
                      00081         endm
                      00082 
                      00083 ;***************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00084 ; Delay: ~160us macro
                      00085 ;***************************************
                      00086 LCD_DELAY macro
                      00087         movlw   0xFF
                      00088         movwf   lcd_d1
                      00089         decfsz  lcd_d1,f
                      00090         goto    $-1
                      00091         endm
                      00092         
                      00093 ;***************************************
                      00094 ; Display macro
                      00095 ;***************************************
                      00096 Display macro   Message
                      00097                 local   loop_
                      00098                 local   end_
                      00099                 clrf    Table_Counter
                      00100                 clrw            
                      00101 loop_   movf    Table_Counter,W
                      00102                 call    Message
                      00103                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
                      00104                 btfsc   STATUS,Z
                      00105                         goto    end_
                      00106                 call    WR_DATA
                      00107                 incf    Table_Counter,F
                      00108                 goto    loop_
                      00109 end_
                      00110                 endm
                      00111                 
                      00112 ;*******************************************************
                      00113 ;******             BCD                 ****************
                      00114 ;*******************************************************
                      00115         
                      00116 ;---------------- Binary (16-bit) to BCD -----------------------
                      00117 ;
                      00118 ;bin8_BCD:      ; --- Takes Binary.number in      NumL
                      00119 ;bin16_BCD:     ; --- Takes Binary.number in NumH:NumL 
                      00120                 ; --> Returns decimal.form  in TenK:Thou:Hund:Tens:Ones
                      00121 ;
                      00122 ; Uses variables
                      00123 ; NumH, NumL
                      00124 ; TenK, Thou, Hund, Tens, Ones
                      00125                 
                      00126 ;BCD    macro   NumH, NumL
                      00127 
0001                  00128 bin16_BCD
0001   0E3D           00129         swapf   NumH, W
0002   390F           00130         andlw   0x0F
0003   3EF0           00131         addlw   0xF0
0004   00C0           00132         movwf   Thou 
0005   07C0           00133         addwf   Thou, F 
0006   3EE2           00134         addlw   0xE2 
0007   00C1           00135         movwf   Hund 
0008   3E32           00136         addlw   0x32 
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0009   00C3           00137         movwf   Ones 
                      00138 
000A   083D           00139         movf    NumH, W 
000B   390F           00140         andlw   0x0F 
000C   07C1           00141         addwf   Hund, F 
000D   07C1           00142         addwf   Hund, F 
000E   07C3           00143         addwf   Ones, F 
000F   3EE9           00144         addlw   0xE9 
0010   00C2           00145         movwf   Tens 
0011   07C2           00146         addwf   Tens, F 
0012   07C2           00147         addwf   Tens, F 
                      00148 
0013   0E3E           00149         swapf   NumL, W 
0014   390F           00150         andlw   0x0F 
0015   07C2           00151         addwf   Tens, F 
0016   07C3           00152         addwf   Ones, F 
                      00153 
0017   0DC2           00154         rlf    Tens, F 
0018   0DC3           00155         rlf    Ones, F 
0019   09C3           00156         comf    Ones, F 
001A   0DC3           00157         rlf    Ones, F 
                      00158 
001B   083E           00159         movf    NumL, W 
001C   390F           00160         andlw   0x0F 
001D   07C3           00161         addwf   Ones, F 
001E   0DC0           00162         rlf    Thou,F 
                      00163 
001F   3007           00164         movlw   0x07 
0020   00BF           00165         movwf   TenK 
                      00166 
0021   300A           00167         movlw   0x0A
0022                  00168 Lb1
0022   03C2           00169         decf    Tens, F 
0023   07C3           00170         addwf   Ones, F 
0024   1C03           00171         btfss   STATUS, C 
0025   2???           00172         goto            Lb1 
0026                  00173 Lb2
0026   03C1           00174         decf    Hund, F 
0027   07C2           00175         addwf   Tens, F 
0028   1C03           00176         btfss   STATUS,C 
0029   2???           00177         goto            Lb2 
002A                  00178 Lb3
002A   03C0           00179         decf    Thou, F 
002B   07C1           00180         addwf   Hund, F 
002C   1C03           00181         btfss   STATUS,C
002D   2???           00182         goto            Lb3 
002E                  00183 Lb4
002E   03BF           00184         decf    TenK, F 
002F   07C0           00185         addwf   Thou, F 
0030   1C03           00186         btfss   STATUS,C 
0031   2???           00187         goto            Lb4 
                      00188 
0032   3400           00189         retlw   0
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0033   0008           00190         return
                      00191 ;endm
                      00192 
                      00193 ;***************************************
                      00194 ; Initialize
                      00195 ;***************************************
0034                  00196 init
0034   018B           00197          clrf      INTCON         ; No interrupts
                      00198 
0035   1683           00199          bsf       STATUS,RP0     ; select bank 1
0036   0185           00200          clrf      TRISA          ; All port A is output
0037   30F2           00201          movlw     b'11110010'    ; Set required keypad inputs
0038   0086           00202          movwf     TRISB
0039   0187           00203          clrf      TRISC          ; All port C is output
003A   0188           00204          clrf      TRISD          ; All port D is output
                      00205          
                      00206                   ;Set SDA and SCL to high-Z first as required for I2C
003B   1607           00207                  bsf       TRISC,4                
003C   1587           00208                  bsf       TRISC,3
                      00209 
003D   1283           00210          bcf       STATUS,RP0     ; select bank 0
003E   0185           00211          clrf      PORTA
003F   0186           00212          clrf      PORTB
0040   0187           00213          clrf      PORTC
0041   0188           00214          clrf      PORTD
                      00215          
                      00216         ;Set up I2C for communication
                      00217                  
0042   2???           00218         call       i2c_common_setup
                      00219 ;*******************************************************************************
                      00220         ; UNCOMMENT IF YOU WANT TO CHANGE THE TIME
                      00221         ;rtc_resetAll
                      00222         ;call set_rtc_time
                      00223 ;*******************************************************************************
                      00224                  
                      00225                  ;Used to set up time in RTC, load to the PIC when RTC is used for the first time
                      00226                  ;call     set_rtc_time
                      00227           
0043   2???           00228          call      InitLCD        ;Initialize the LCD (code in lcd.asm; imported by lcd.inc)
                      00229           ;A/D converter attempt
                      00230          
0044   1303           00231          bcf    STATUS,RP1
0045   1683           00232          bsf    STATUS,RP0      ;Select bank 1
                      00233          
0046   1405           00234          bsf    IR1             ;makes RA0 an input
0047   1283           00235          bcf    STATUS,RP0      ; go back to bank 0
                      00236          
0048   1507           00237         bsf     PORTC,2         ; gives RC2 5 volts
                      00238          
                      00239         ; Set ADCON1 to use RA0 as analog input
                      00240         
                      00241         
0049   1683           00242         bsf     STATUS,RP0      ;Select bank 1
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004A   3006           00243         movlw   b'00000110'     ;left justified, all inputs digital
004B   009F           00244         movwf   ADCON1                  ;All digital input, reference voltage Vdd Vss
                      00245 
                      00246         ;ADCON0
004C   1283           00247         bcf     STATUS,RP0
004D   30C5           00248         movlw   b'11000101'     ;movlw  b'11000101' selects the clock and ra0 as the reader pin
004E   009F           00249         movwf   ADCON0
                      00250         
                      00251 ;***************************************************
                      00252 ; Initialize variables and Displays
                      00253 ;****************************************************   
                      00254         Display         Welcome_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
004F   01B3               M                 clrf    Table_Counter
0050   0103               M                 clrw            
0051   0833               M loop_   movf    Table_Counter,W
0052   2???               M                 call    Welcome_Msg
0053   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0054   1903               M                 btfsc   STATUS,Z
0055   2???               M                         goto    end_
0056   2???               M                 call    WR_DATA
0057   0AB3               M                 incf    Table_Counter,F
0058   2???               M                 goto    loop_
0059                      M end_
                      00255         
                      00256         
0059   3000           00257         movlw   b'0'
005A   00C8           00258         movwf   frontbinCounter         ;initialize binCounter with zero
005B   3000           00259         movlw   b'0'
005C   00C9           00260         movwf   backbinCounter          ;initialize binCounter with zero
                      00261         
                      00262 ;***************************************
                      00263 ; Number to Printable
                      00264 ;***************************************
                      00265 PrintNumber macro       number
                      00266         ;movf       number ,W
                      00267         movfw       number
                      00268         call        DectoChar
                      00269         call        WR_DATA
                      00270         endm
                      00271 
                      00272 ; white and black sticker labels at bottom
                      00273         
                      00274 
                      00275 ;*******************************************************************************************************
                            *******************************************
                      00276 ;                                                                 MAIN CODE
                      00277 ;-------------------------------------------------------------------------------------------------------
                            ---------------------------------------
005D                  00278 Main    
                      00279 
                      00280 ; WAIT FOR INITIAL INPUT
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

005D   2???           00281     goto    KeypadandLCD     ;calls initial form of keypad and LCD, where  robot is waiting for input to
                             begin 
                      00282         
                      00283     
005E   3005           00284     movlw  b'0101'
005F   00C8           00285     movwf   frontbinCounter         ;testing with value of 5 bins
0060   00C9           00286     movwf   backbinCounter    
                      00287     
                      00288     
                      00289     
                      00290     
                      00291     
                      00292 ;    goto    getTimeRTC     ; gets time from RTC clock
                      00293 ;       
                      00294 ;;   MOTOR ON
                      00295 ;       
                      00296 ;    bsf        DCMotor             ; begin forward movement, set appropriate bit to 1  
                      00297 ;    movlw   b'1'
                      00298 ;    addwf  distanceMoved,f     ; increments distanceMoved by 1 (will experimentally find binary value f
                            or 4 m)
                      00299 ;    
                      00300 ;;   CHECK COLUMN
                      00301 ;    
                      00302 ;    call    ChooseIR1          ;selects IR1 for data conversion
                      00303 ;    call    pollColumnSensor   ;checks to see if column present
                      00304 ;    btfss   isColumnThere,0
                      00305 ;    goto    Main
                      00306 ;    
                      00307 ;;   CHECK IF AT THE END OF BUCKET LINE
                      00308 ;    
                      00309 ;    call    pollUSsensor       ; call ultrasonic sensor
                      00310 ;    btfsc   nothingAhead,0     ;   checks if there is nothing ahead
                      00311 ;    goto    Finalize
                      00312 ;    
                      00313 ;;   CHECK IF CONTAINER IS THERE
                      00314 ;    
                      00315 ;    btfss   withinDetectionRange,0  ; checks whether container ahead is within detection range
                      00316 ;    goto    Main
                      00317 ;   call start arm motor
                      00318 ;   call other motor
                      00319 ;    call    frontscanContainer     ; label to begin container scanning
                      00320 ;    call    backscanContainer      ; label to begin container scanning
                      00321 ;    movlw  b'1'
                      00322 ;    addwf   frontbinCounter,f      ;increment the bin counters
                      00323 ;    addwf   backbinCounter,f
0061   2???           00324     goto    Main
                      00325 
                      00326 
                      00327                 
                      00328 ;-----------------------------------------------------------------------------------------------------  
                                    
                      00329 
                      00330 ;*************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00331 ;       Keypad and LCD forms        
                      00332 ;*************************************
                      00333         
                      00334         
                      00335         
0062   1C86           00336 KeypadandLCD    btfss           PORTB,1     ;Wait until data is available from the keypad
0063   2???           00337                 goto            $-1 
                      00338 
0064   0E06           00339                 swapf           PORTB,W     ;Read PortB<7:4> into W<3:0>
0065   390F           00340                 andlw           0x0F
0066   00B9           00341                 movwf           temp
                      00342                 Key     0x00, OperationDisplay
0067   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0068   390F               M          andlw          0x0F
0069   3A00               M          xorlw          0x00
006A   1903               M          btfsc          STATUS, Z
006B   2???               M          call           OperationDisplay
                      00343                 ;Key    0x00, goback
                      00344                 Key     0x01, StickerDisplay
006C   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
006D   390F               M          andlw          0x0F
006E   3A01               M          xorlw          0x01
006F   1903               M          btfsc          STATUS, Z
0070   2???               M          call           StickerDisplay
                      00345                 Rotation        0x03
0071   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0072   390F               M          andlw          0x0F
0073   3A03               M          xorlw          0x03
0074   1903               M          btfsc          STATUS, Z
0075   2???               M          call           ShiftLeft
                      00346                 Key     0x04, BinsDisplay
0076   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0077   390F               M          andlw          0x0F
0078   3A04               M          xorlw          0x04
0079   1903               M          btfsc          STATUS, Z
007A   2???               M          call           BinsDisplay
                      00347                 Key     0x05, StickerDisplay
007B   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
007C   390F               M          andlw          0x0F
007D   3A05               M          xorlw          0x05
007E   1903               M          btfsc          STATUS, Z
007F   2???               M          call           StickerDisplay
                      00348                 Key     0x06, BinLocationsDisplay
0080   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0081   390F               M          andlw          0x0F
0082   3A06               M          xorlw          0x06
0083   1903               M          btfsc          STATUS, Z
0084   2???               M          call           BinLocationsDisplay
                      00349                 Key     0x08, OperationTimeDisplay
0085   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
0086   390F               M          andlw          0x0F
0087   3A08               M          xorlw          0x08
0088   1903               M          btfsc          STATUS, Z
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0089   2???               M          call           OperationTimeDisplay
                      00350                 Key     0x09, RTCDisplay
008A   0E06               M          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
008B   390F               M          andlw          0x0F
008C   3A09               M          xorlw          0x09
008D   1903               M          btfsc          STATUS, Z
008E   2???               M          call           RTCDisplay
008F   1886           00351                 btfsc           PORTB,1     ;Wait until key is released
0090   2???           00352                 goto            $-1
0091   2???           00353                 goto            KeypadandLCD
                      00354                 
0092                  00355 goback
0092   0008           00356                 return  
                      00357                 
                      00358                 
                      00359 ;*********************************************************
                      00360 ; A to D conversion with LCD display for IR sensor
                      00361 ;*********************************************************
                      00362 
0093                  00363 LCDConversion
0093   1507           00364         bsf     PORTC,2         ; gives RC2 5 volts     
                      00365                 
0094   151F           00366         bsf     ADCON0,2                ;start conversion and wait for it to complete
0095   191F           00367         btfsc   ADCON0,2                ;LCD CONVERSION MODULE
0096   2???           00368         goto    $-1
                      00369         
0097   081E           00370         movf    ADRESH, W
0098   00BD           00371         movwf   NumH
0099   081E           00372         movf    ADRESL, W
009A   00BE           00373         movwf   NumL
                      00374         
                      00375         ;shivs code thing
009B   3003           00376         movlw   0x3
009C   00BF           00377         movwf   TenK
                      00378         
                      00379         
009D   2???           00380         call            bin16_BCD
009E   2???           00381         call            ClrLCD
                      00382         PrintNumber     TenK
                          M         ;movf       number ,W
009F   083F               M         movfw       TenK
00A0   2???               M         call        DectoChar
00A1   2???               M         call        WR_DATA
                      00383         PrintNumber     Thou
                          M         ;movf       number ,W
00A2   0840               M         movfw       Thou
00A3   2???               M         call        DectoChar
00A4   2???               M         call        WR_DATA
                      00384         PrintNumber     Hund
                          M         ;movf       number ,W
00A5   0841               M         movfw       Hund
00A6   2???               M         call        DectoChar
00A7   2???               M         call        WR_DATA
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00385         PrintNumber     Tens
                          M         ;movf       number ,W
00A8   0842               M         movfw       Tens
00A9   2???               M         call        DectoChar
00AA   2???               M         call        WR_DATA
                      00386         PrintNumber     Ones
                          M         ;movf       number ,W
00AB   0843               M         movfw       Ones
00AC   2???               M         call        DectoChar
00AD   2???               M         call        WR_DATA
00AE   2???           00387         call            HalfS
00AF   2???           00388         call            HalfS
00B0   1107           00389         bcf     PORTC,2         ; gives RC2 5 volts
00B1   0008           00390         return
                      00391 
                      00392 ;****************************
                      00393 ;       Choose IR1
                      00394 ;****************************
                      00395         
00B2                  00396 ChooseIR1
                      00397         
00B2   1405           00398         bsf     IR1             ;makes RA0 an input
00B3   30C5           00399         movlw   b'11000101'     ;movlw  b'11000101' selects the clock and ra0 as the reader pin
00B4   009F           00400         movwf   ADCON0
                      00401         
00B5   0008           00402         return
                      00403         
                      00404 ;****************************
                      00405 ;       Choose IR2
                      00406 ;****************************
                      00407         
00B6                  00408 ChooseIR2
                      00409         
00B6   1485           00410         bsf     IR2             ;makes RA0 an input
00B7   30CD           00411         movlw   b'11001101'     ;movlw  b'11000101' selects the clock and ra0 as the reader pin
00B8   009F           00412         movwf   ADCON0
                      00413         
00B9   0008           00414         return
                      00415         
                      00416         
                      00417 ;****************************************************
                      00418 ;   ScanFrontContainer
                      00419 ;****************************************************
                      00420         
00BA                  00421 ScanFrontContainer
                      00422         ; A to d conversion
                      00423         
00BA   151F           00424         bsf     ADCON0,2                ;start conversion and wait for it to complete
00BB   191F           00425         btfsc   ADCON0,2                ;LCD CONVERSION MODULE
00BC   2???           00426         goto    $-1
                      00427         
00BD   081E           00428         movf    ADRESH, W
00BE   00BD           00429         movwf   NumH
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00BF   081E           00430         movf    ADRESL, W
00C0   00BE           00431         movwf   NumL
                      00432         
00C1   1D1E           00433         btfss   ADRESH,2                ;test bit 2 of ADRESH, the bit that we believe will distinguish 
                            black and white (need to experiment)
Warning[202]: Argument out of range.  Least significant bits used.
00C2   1446           00434         bsf     frontstickerValues,frontbinCounter              ;if is set, means that colour is white
00C3   191E           00435         btfsc   ADRESH,2
Warning[202]: Argument out of range.  Least significant bits used.
00C4   1046           00436         bcf     frontstickerValues,frontbinCounter    ; modifies the bits in the stickervalues
                      00437         
                      00438         ;display on screen for troubleshooting purposes
                      00439         
00C5   2???           00440         call            bin16_BCD
00C6   2???           00441         call            ClrLCD
                      00442         PrintNumber     TenK
                          M         ;movf       number ,W
00C7   083F               M         movfw       TenK
00C8   2???               M         call        DectoChar
00C9   2???               M         call        WR_DATA
                      00443         PrintNumber     Thou
                          M         ;movf       number ,W
00CA   0840               M         movfw       Thou
00CB   2???               M         call        DectoChar
00CC   2???               M         call        WR_DATA
                      00444         PrintNumber     Hund
                          M         ;movf       number ,W
00CD   0841               M         movfw       Hund
00CE   2???               M         call        DectoChar
00CF   2???               M         call        WR_DATA
                      00445         PrintNumber     Tens
                          M         ;movf       number ,W
00D0   0842               M         movfw       Tens
00D1   2???               M         call        DectoChar
00D2   2???               M         call        WR_DATA
                      00446         PrintNumber     Ones    
                          M         ;movf       number ,W
00D3   0843               M         movfw       Ones
00D4   2???               M         call        DectoChar
00D5   2???               M         call        WR_DATA
00D6   2???           00447         call            HalfS
00D7   2???           00448         call            HalfS
                      00449         
00D8   0008           00450         return
                      00451         
                      00452 ;****************************************************
                      00453 ;   ScanBackContainer
                      00454 ;****************************************************
                      00455         
00D9                  00456 ScanBackContainer
                      00457         ; A to d conversion
                      00458         
00D9   151F           00459         bsf     ADCON0,2                ;start conversion and wait for it to complete
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DA   191F           00460         btfsc   ADCON0,2                ;LCD CONVERSION MODULE
00DB   2???           00461         goto    $-1
                      00462         
00DC   081E           00463         movf    ADRESH, W
00DD   00BD           00464         movwf   NumH
00DE   081E           00465         movf    ADRESL, W
00DF   00BE           00466         movwf   NumL
                      00467         
00E0   1D1E           00468         btfss   ADRESH,2                ;test bit 2 of ADRESH, the bit that we believe will distinguish 
                            black and white (need to experiment)
Warning[202]: Argument out of range.  Least significant bits used.
00E1   14C7           00469         bsf     backstickerValues,backbinCounter                ;if is set, means that colour is white
00E2   191E           00470         btfsc   ADRESH,2
Warning[202]: Argument out of range.  Least significant bits used.
00E3   10C7           00471         bcf     backstickerValues,backbinCounter    ; modifies the bits in the stickervalues
                      00472         
                      00473         ;display on screen for troubleshooting purposes
                      00474         
00E4   2???           00475         call            bin16_BCD
00E5   2???           00476         call            ClrLCD
                      00477         PrintNumber     TenK
                          M         ;movf       number ,W
00E6   083F               M         movfw       TenK
00E7   2???               M         call        DectoChar
00E8   2???               M         call        WR_DATA
                      00478         PrintNumber     Thou
                          M         ;movf       number ,W
00E9   0840               M         movfw       Thou
00EA   2???               M         call        DectoChar
00EB   2???               M         call        WR_DATA
                      00479         PrintNumber     Hund
                          M         ;movf       number ,W
00EC   0841               M         movfw       Hund
00ED   2???               M         call        DectoChar
00EE   2???               M         call        WR_DATA
                      00480         PrintNumber     Tens
                          M         ;movf       number ,W
00EF   0842               M         movfw       Tens
00F0   2???               M         call        DectoChar
00F1   2???               M         call        WR_DATA
                      00481         PrintNumber     Ones    
                          M         ;movf       number ,W
00F2   0843               M         movfw       Ones
00F3   2???               M         call        DectoChar
00F4   2???               M         call        WR_DATA
00F5   2???           00482         call            HalfS
00F6   2???           00483         call            HalfS
                      00484         
00F7   0008           00485         return
                      00486 
                      00487 ;*********************************************
                      00488 ; Keypad Modules
                      00489 ;*******************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00490          
                      00491 
00F8                  00492 OperationDisplay
00F8   2???           00493         call        Clear_Display
                      00494         
00F9   2???           00495         call        ScanFrontContainer
00FA   2???           00496         call        ScanBackContainer
00FB   2???           00497         call        ScanFrontContainer
00FC   2???           00498         call        ScanBackContainer
00FD   2???           00499         call        ScanFrontContainer
00FE   2???           00500         call        ScanBackContainer
00FF   2???           00501         call        ScanFrontContainer
0100   2???           00502         call        ScanBackContainer
                      00503         
                      00504         
0101   2???           00505         call        Clear_Display
                      00506         Display     WantResults
  0000                    M                 local   loop_
  0000                    M                 local   end_
0102   01B3               M                 clrf    Table_Counter
0103   0103               M                 clrw            
0104   0833               M loop_   movf    Table_Counter,W
0105   2???               M                 call    WantResults
0106   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0107   1903               M                 btfsc   STATUS,Z
0108   2???               M                         goto    end_
0109   2???               M                 call    WR_DATA
010A   0AB3               M                 incf    Table_Counter,F
010B   2???               M                 goto    loop_
010C                      M end_
010C   2???           00507         call        Switch_Lines
                      00508         Display     WantRotate
  0000                    M                 local   loop_
  0000                    M                 local   end_
010D   01B3               M                 clrf    Table_Counter
010E   0103               M                 clrw            
010F   0833               M loop_   movf    Table_Counter,W
0110   2???               M                 call    WantRotate
0111   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0112   1903               M                 btfsc   STATUS,Z
0113   2???               M                         goto    end_
0114   2???               M                 call    WR_DATA
0115   0AB3               M                 incf    Table_Counter,F
0116   2???               M                 goto    loop_
0117                      M end_
                      00509         
0117   0008           00510         return
                      00511         
0118                  00512 ListDisplay
0118   2???           00513         call        Clear_Display
                      00514         Display     Results1
  0000                    M                 local   loop_
  0000                    M                 local   end_
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0119   01B3               M                 clrf    Table_Counter
011A   0103               M                 clrw            
011B   0833               M loop_   movf    Table_Counter,W
011C   2???               M                 call    Results1
011D   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
011E   1903               M                 btfsc   STATUS,Z
011F   2???               M                         goto    end_
0120   2???               M                 call    WR_DATA
0121   0AB3               M                 incf    Table_Counter,F
0122   2???               M                 goto    loop_
0123                      M end_
0123   2???           00515         call        Switch_Lines
                      00516         Display     Results2
  0000                    M                 local   loop_
  0000                    M                 local   end_
0124   01B3               M                 clrf    Table_Counter
0125   0103               M                 clrw            
0126   0833               M loop_   movf    Table_Counter,W
0127   2???               M                 call    Results2
0128   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0129   1903               M                 btfsc   STATUS,Z
012A   2???               M                         goto    end_
012B   2???               M                 call    WR_DATA
012C   0AB3               M                 incf    Table_Counter,F
012D   2???               M                 goto    loop_
012E                      M end_
                      00517         
012E   0008           00518         return
                      00519                 
012F                  00520 BinsDisplay
012F   2???           00521         call        Clear_Display
                      00522         Display     Bins
  0000                    M                 local   loop_
  0000                    M                 local   end_
0130   01B3               M                 clrf    Table_Counter
0131   0103               M                 clrw            
0132   0833               M loop_   movf    Table_Counter,W
0133   2???               M                 call    Bins
0134   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0135   1903               M                 btfsc   STATUS,Z
0136   2???               M                         goto    end_
0137   2???               M                 call    WR_DATA
0138   0AB3               M                 incf    Table_Counter,F
0139   2???               M                 goto    loop_
013A                      M end_
                      00523                 
013A   0008           00524         return
                      00525         
013B                  00526 StickerDisplay
013B   2???           00527         call        Clear_Display
                      00528 
                      00529 ;       movlw       b'0000000'
                      00530 ;       movwf       stickerValues
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00531 ;       movlw       b'1111111'
                      00532 ;       movwf       backstickerValues
                      00533         
013C   0848           00534         movf        frontbinCounter, W  ; save the original front values thing
013D   00CA           00535         movwf       binCounter
                      00536         
013E   1C46           00537         btfss       frontstickerValues,0        ; check the ith bucket value and if it is clear,
013F   2???           00538         call        PrintBlackSticker   ; print a black sticker on the thing
0140   1846           00539         btfsc       frontstickerValues,0
0141   2???           00540         call        PrintWhiteSticker
                      00541         ;call       Switch_Lines
0142   1C47           00542         btfss       backstickerValues,0 ; check the ith bucket value and if it is clear,
0143   2???           00543         call        PrintBlackSticker   ; print a black sticker on the thing
0144   1847           00544         btfsc       backstickerValues,0
0145   2???           00545         call        PrintWhiteSticker
                      00546         ;call       Switch_Lines
                      00547         
0146   0BC8           00548         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
0147   2???           00549         goto        $+2
0148   0008           00550         return
                      00551         
0149   1CC6           00552         btfss       frontstickerValues,1        ; check the ith bucket value and if it is clear,
014A   2???           00553         call        PrintBlackSticker   ; print a black sticker on the thing
014B   18C6           00554         btfsc       frontstickerValues,1
014C   2???           00555         call        PrintWhiteSticker
                      00556         ;call       Switch_Lines
014D   1CC7           00557         btfss       backstickerValues,1 ; check the ith bucket value and if it is clear,
014E   2???           00558         call        PrintBlackSticker   ; print a black sticker on the thing
014F   18C7           00559         btfsc       backstickerValues,1
0150   2???           00560         call        PrintWhiteSticker
                      00561         ;call       Switch_Lines
                      00562         
0151   0BC8           00563         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
0152   2???           00564         goto        $+2
0153   0008           00565         return
                      00566         
0154   1D46           00567         btfss       frontstickerValues,2        ; check the ith bucket value and if it is clear,
0155   2???           00568         call        PrintBlackSticker   ; print a black sticker on the thing
0156   1946           00569         btfsc       frontstickerValues,2
0157   2???           00570         call        PrintWhiteSticker
                      00571         ;call       Switch_Lines
0158   1D47           00572         btfss       backstickerValues,2 ; check the ith bucket value and if it is clear,
0159   2???           00573         call        PrintBlackSticker   ; print a black sticker on the thing
015A   1947           00574         btfsc       backstickerValues,2
015B   2???           00575         call        PrintWhiteSticker
                      00576         ;call       Switch_Lines
                      00577         
015C   0BC8           00578         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
015D   2???           00579         goto        $+2
015E   0008           00580         return
                      00581         
015F   1DC6           00582         btfss       frontstickerValues,3        ; check the ith bucket value and if it is clear,
0160   2???           00583         call        PrintBlackSticker   ; print a black sticker on the thing
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0161   19C6           00584         btfsc       frontstickerValues,3
0162   2???           00585         call        PrintWhiteSticker
                      00586         ;call       Switch_Lines
0163   1DC7           00587         btfss       backstickerValues,3 ; check the ith bucket value and if it is clear,
0164   2???           00588         call        PrintBlackSticker   ; print a black sticker on the thing
0165   19C7           00589         btfsc       backstickerValues,3
0166   2???           00590         call        PrintWhiteSticker
                      00591         ;call       Switch_Lines
                      00592         
0167   0BC8           00593         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
0168   2???           00594         goto        $+2
0169   0008           00595         return
                      00596         
016A   1E46           00597         btfss       frontstickerValues,4        ; check the ith bucket value and if it is clear,
016B   2???           00598         call        PrintBlackSticker   ; print a black sticker on the thing
016C   1A46           00599         btfsc       frontstickerValues,4
016D   2???           00600         call        PrintWhiteSticker
                      00601         ;call       Switch_Lines
016E   1E47           00602         btfss       backstickerValues,4 ; check the ith bucket value and if it is clear,
016F   2???           00603         call        PrintBlackSticker   ; print a black sticker on the thing
0170   1A47           00604         btfsc       backstickerValues,4
0171   2???           00605         call        PrintWhiteSticker
                      00606         ;call       Switch_Lines
                      00607         
0172   0BC8           00608         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
0173   2???           00609         goto        $+2
0174   0008           00610         return
                      00611         
0175   1EC6           00612         btfss       frontstickerValues,5        ; check the ith bucket value and if it is clear,
0176   2???           00613         call        PrintBlackSticker   ; print a black sticker on the thing
0177   1AC6           00614         btfsc       frontstickerValues,5
0178   2???           00615         call        PrintWhiteSticker
                      00616         ;call       Switch_Lines
0179   1EC7           00617         btfss       backstickerValues,5 ; check the ith bucket value and if it is clear,
017A   2???           00618         call        PrintBlackSticker   ; print a black sticker on the thing
017B   1AC7           00619         btfsc       backstickerValues,5
017C   2???           00620         call        PrintWhiteSticker
                      00621         ;call       Switch_Lines
                      00622         
017D   0BC8           00623         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
017E   2???           00624         goto        $+2
017F   0008           00625         return
                      00626         
0180   1F46           00627         btfss       frontstickerValues,6        ; check the ith bucket value and if it is clear,
0181   2???           00628         call        PrintBlackSticker   ; print a black sticker on the thing
0182   1B46           00629         btfsc       frontstickerValues,6
0183   2???           00630         call        PrintWhiteSticker
                      00631         ;call       Switch_Lines
0184   1F47           00632         btfss       backstickerValues,6 ; check the ith bucket value and if it is clear,
0185   2???           00633         call        PrintBlackSticker   ; print a black sticker on the thing
0186   1B47           00634         btfsc       backstickerValues,6
0187   2???           00635         call        PrintWhiteSticker
                      00636         ;call       Switch_Lines
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00637         
0188   0BC8           00638         decfsz      frontbinCounter             ;decrements bin counter to know how much to print
0189   2???           00639         goto        $+2
018A   0008           00640         return
                      00641         
018B   0008           00642         return
                      00643         
018C                  00644 BinLocationsDisplay
018C   2???           00645         call        Clear_Display
                      00646         Display     BinLocations
  0000                    M                 local   loop_
  0000                    M                 local   end_
018D   01B3               M                 clrf    Table_Counter
018E   0103               M                 clrw            
018F   0833               M loop_   movf    Table_Counter,W
0190   2???               M                 call    BinLocations
0191   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
0192   1903               M                 btfsc   STATUS,Z
0193   2???               M                         goto    end_
0194   2???               M                 call    WR_DATA
0195   0AB3               M                 incf    Table_Counter,F
0196   2???               M                 goto    loop_
0197                      M end_
                      00647                 
0197   0008           00648         return
                      00649 
0198                  00650 OperationTimeDisplay
0198   2???           00651         call        Clear_Display
                      00652         Display     OperationTime
  0000                    M                 local   loop_
  0000                    M                 local   end_
0199   01B3               M                 clrf    Table_Counter
019A   0103               M                 clrw            
019B   0833               M loop_   movf    Table_Counter,W
019C   2???               M                 call    OperationTime
019D   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
019E   1903               M                 btfsc   STATUS,Z
019F   2???               M                         goto    end_
01A0   2???               M                 call    WR_DATA
01A1   0AB3               M                 incf    Table_Counter,F
01A2   2???               M                 goto    loop_
01A3                      M end_
                      00653                 
01A3   0008           00654         return
                      00655         
01A4                  00656 ShiftLeft
01A4   3018           00657         movlw           b'00011000'             ;Move to the left
01A5   2???           00658         call            WR_INS
01A6   0008           00659         return
                      00660 
01A7   2???           00661         goto Main
                      00662         
01A8                  00663 RTCDisplay
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A8   2???           00664         call    show_RTC
                      00665         
01A9   1886           00666         btfsc           PORTB,1     ;Wait until data is available from the keypad
01AA   0008           00667         return
01AB   1886           00668         btfsc           PORTB,1     ;Wait until data is available from the keypad
01AC   0008           00669         return
01AD   1886           00670         btfsc           PORTB,1     ;Wait until data is available from the keypad
01AE   0008           00671         return
01AF   1886           00672         btfsc           PORTB,1     ;Wait until data is available from the keypad
01B0   0008           00673         return
01B1   2???           00674         goto        RTCDisplay
                      00675         
                      00676 ;***************************************
                      00677 ; Look up table
                      00678 ;***************************************
                      00679     
01B2                  00680 Welcome_Msg
                      00681         
                      00682         ;Change Page
01B2   00BA           00683         movwf   Temp
01B3   30??           00684         movlw   HIGH Welcome_MsgEntries
01B4   008A           00685         movwf   PCLATH
01B5   083A           00686         movf    Temp,w
01B6   3E??           00687         addlw   LOW Welcome_MsgEntries
01B7   1803           00688         btfsc   STATUS,C
01B8   0A8A           00689             incf    PCLATH,f
01B9   0082           00690         movwf   PCL     
01BA   0782           00691         addwf    PCL,F
01BB                  00692 Welcome_MsgEntries
01BB   3450 3472 3465 00693         dt        "Press 1 to start robot", 0
       3473 3473 3420 
       3431 3420 3474 
       346F 3420 3473 
       3474 3461 3472 
       3474 3420 3472 
       346F 3462 346F 
       3474 3400 
                      00694         
01D2                  00695 Operation
                      00696         
                      00697         ;Change Page
01D2   00BA           00698         movwf    Temp
01D3   30??           00699         movlw   HIGH OperationEntries
01D4   008A           00700         movwf   PCLATH
01D5   083A           00701         movf    Temp,w
01D6   3E??           00702         addlw   LOW OperationEntries
01D7   1803           00703         btfsc   STATUS,C
01D8   0A8A           00704             incf    PCLATH,f
01D9   0082           00705         movwf   PCL
01DA   0782           00706         addwf    PCL,F
01DB                  00707 OperationEntries
01DB   344F 3470 3465 00708         dt        "Operating...",0
       3472 3461 3474 
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3469 346E 3467 
       342E 342E 342E 
       3400 
                      00709 
01E8                  00710 WantResults
                      00711         
                      00712         ;Change Page
01E8   00BA           00713         movwf    Temp
01E9   30??           00714         movlw   HIGH WantResultsEntries
01EA   008A           00715         movwf   PCLATH
01EB   083A           00716         movf    Temp,w
01EC   3E??           00717         addlw   LOW WantResultsEntries
01ED   1803           00718         btfsc   STATUS,C
01EE   0A8A           00719             incf    PCLATH,f
01EF   0082           00720         movwf   PCL
01F0   0782           00721         addwf    PCL,F
01F1                  00722 WantResultsEntries
01F1   3450 3472 3465 00723         dt        "Press 2 to display results",0
       3473 3473 3420 
       3432 3420 3474 
       346F 3420 3464 
       3469 3473 3470 
       346C 3461 3479 
       3420 3472 3465 
       3473 3475 346C 
       3474 3473 3400 
                      00724 
                      00725 
020C                  00726 WantRotate
                      00727                 
                      00728         ;Change Page
020C   00BA           00729         movwf    Temp
020D   30??           00730         movlw   HIGH WantRotateEntries
020E   008A           00731         movwf   PCLATH
020F   083A           00732         movf    Temp,w
0210   3E??           00733         addlw   LOW WantRotateEntries
0211   1803           00734         btfsc   STATUS,C
0212   0A8A           00735             incf    PCLATH,f
0213   0082           00736         movwf   PCL
0214   0782           00737         addwf    PCL,F
0215                  00738 WantRotateEntries
0215   3450 3472 3465 00739         dt        "Press A to rotate screen",0
       3473 3473 3420 
       3441 3420 3474 
       346F 3420 3472 
       346F 3474 3461 
       3474 3465 3420 
       3473 3463 3472 
       3465 3465 346E 
       3400 
                      00740         
022E                  00741 Results1 
                      00742                 
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00743         ;Change Page
022E   00BA           00744         movwf    Temp
022F   30??           00745         movlw   HIGH Results1Entries
0230   008A           00746         movwf   PCLATH
0231   083A           00747         movf    Temp,w
0232   3E??           00748         addlw   LOW Results1Entries
0233   1803           00749         btfsc   STATUS,C
0234   0A8A           00750             incf    PCLATH,f
0235   0082           00751         movwf   PCL
0236   0782           00752         addwf    PCL,F
0237                  00753 Results1Entries 
0237   3434 343A 3420 00754         dt        "4: number of bins, 5: sticker status",0
       346E 3475 346D 
       3462 3465 3472 
       3420 346F 3466 
       3420 3462 3469 
       346E 3473 342C 
       3420 3435 343A 
       3420 3473 3474 
       3469 3463 346B 
       3465 3472 3420 
       3473 3474 3461 
       3474 3475 3473 
       3400 
                      00755         
025C                  00756 Results2
                      00757         
                      00758         ;Change Page
025C   00BA           00759         movwf    Temp
025D   30??           00760         movlw   HIGH Results2Entries
025E   008A           00761         movwf   PCLATH
025F   083A           00762         movf    Temp,w
0260   3E??           00763         addlw   LOW Results2Entries
0261   1803           00764         btfsc   STATUS,C
0262   0A8A           00765             incf    PCLATH,f
0263   0082           00766         movwf   PCL     
0264   0782           00767         addwf    PCL,F
0265                  00768 Results2Entries 
0265   3436 343A 3420 00769         dt        "6: bin locations, 7: operation time",0
       3462 3469 346E 
       3420 346C 346F 
       3463 3461 3474 
       3469 346F 346E 
       3473 342C 3420 
       3437 343A 3420 
       346F 3470 3465 
       3472 3461 3474 
       3469 346F 346E 
       3420 3474 3469 
       346D 3465 3400 
                      00770         
0289                  00771 Bins
                      00772         ;Change Page
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0289   00BA           00773         movwf    Temp
028A   30??           00774         movlw   HIGH BinsEntries
028B   008A           00775         movwf   PCLATH
028C   083A           00776         movf    Temp,w
028D   3E??           00777         addlw   LOW BinsEntries
028E   1803           00778         btfsc   STATUS,C
028F   0A8A           00779             incf    PCLATH,f
0290   0082           00780         movwf   PCL     
0291   0782           00781         addwf    PCL,F
0292                  00782 BinsEntries
0292   3434 3420 3462 00783         dt        "4 bins in total",0
       3469 346E 3473 
       3420 3469 346E 
       3420 3474 346F 
       3474 3461 346C 
       3400 
                      00784         
02A2                  00785 StickerStatus
                      00786         
                      00787         ;Change Page
02A2   00BA           00788         movwf    Temp
02A3   30??           00789         movlw   HIGH StickerStatusEntries
02A4   008A           00790         movwf   PCLATH
02A5   083A           00791         movf    Temp,w
02A6   3E??           00792         addlw   LOW StickerStatusEntries
02A7   1803           00793         btfsc   STATUS,C
02A8   0A8A           00794             incf    PCLATH,f
02A9   0082           00795         movwf   PCL     
02AA   0782           00796         addwf    PCL,F
02AB                  00797 StickerStatusEntries
02AB   3442 3442 3457 00798         dt        "BBWBWWWB",0
       3442 3457 3457 
       3457 3442 3400 
                      00799         
02B4                  00800 BinLocations
                      00801         ;Change Page
02B4   00BA           00802         movwf    Temp
02B5   30??           00803         movlw   HIGH BinLocationsEntries
02B6   008A           00804         movwf   PCLATH
02B7   083A           00805         movf    Temp,w
02B8   3E??           00806         addlw   LOW BinLocationsEntries
02B9   1803           00807         btfsc   STATUS,C
02BA   0A8A           00808             incf    PCLATH,f
02BB   0082           00809         movwf   PCL     
02BC   0782           00810         addwf    PCL,F
02BD                  00811 BinLocationsEntries
02BD   344E 346F 3474 00812         dt        "Not receiving anything",0
       3420 3472 3465 
       3463 3465 3469 
       3476 3469 346E 
       3467 3420 3461 
       346E 3479 3474 
       3468 3469 346E 
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3467 3400 
                      00813         
02D4                  00814 OperationTime
                      00815         ;Change Page
02D4   00BA           00816         movwf    Temp
02D5   30??           00817         movlw   HIGH OperationTimeEntries
02D6   008A           00818         movwf   PCLATH
02D7   083A           00819         movf    Temp,w
02D8   3E??           00820         addlw   LOW OperationTimeEntries
02D9   1803           00821         btfsc   STATUS,C
02DA   0A8A           00822             incf    PCLATH,f
02DB   0082           00823         movwf   PCL     
02DC   0782           00824         addwf    PCL,F
02DD                  00825 OperationTimeEntries
02DD   3454 3441 344B 00826         dt        "TAKING IN 5 VOLTS",0
       3449 344E 3447 
       3420 3449 344E 
       3420 3435 3420 
       3456 344F 344C 
       3454 3453 3400 
                      00827         
02EF                  00828 ReceivedInput
                      00829         ;Change Page
02EF   00BA           00830         movwf    Temp
02F0   30??           00831         movlw   HIGH ReceivedInputEntries
02F1   008A           00832         movwf   PCLATH
02F2   083A           00833         movf    Temp,w
02F3   3E??           00834         addlw   LOW ReceivedInputEntries
02F4   1803           00835         btfsc   STATUS,C
02F5   0A8A           00836             incf    PCLATH,f
02F6   0082           00837         movwf   PCL     
02F7   0782           00838         addwf    PCL,F
02F8                  00839 ReceivedInputEntries
02F8   3474 3461 346B 00840         dt        "takin in large value",0
       3469 346E 3420 
       3469 346E 3420 
       346C 3461 3472 
       3467 3465 3420 
       3476 3461 346C 
       3475 3465 3400 
                      00841         
030D                  00842 SmallValueInput
                      00843         ;Change Page
030D   00BA           00844         movwf    Temp
030E   30??           00845         movlw   HIGH SmallValueInputEntries
030F   008A           00846         movwf   PCLATH
0310   083A           00847         movf    Temp,w
0311   3E??           00848         addlw   LOW SmallValueInputEntries
0312   1803           00849         btfsc   STATUS,C
0313   0A8A           00850             incf    PCLATH,f
0314   0082           00851         movwf   PCL     
0315   0782           00852         addwf    PCL,F
0316                  00853 SmallValueInputEntries
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0316   3473 346D 3461 00854         dt        "small value",0
       346C 346C 3420 
       3476 3461 346C 
       3475 3465 3400 
                      00855         
0322                  00856 DectoChar
                      00857         
                      00858         ;Change Page
0322   00BA           00859         movwf   Temp
0323   30??           00860         movlw   HIGH DectoCharEntries
0324   008A           00861         movwf   PCLATH
0325   083A           00862         movf    Temp,w
0326   3E??           00863         addlw   LOW DectoCharEntries
0327   1803           00864         btfsc   STATUS,C
0328   0A8A           00865             incf    PCLATH,f
0329   0082           00866         movwf   PCL     
032A   0782           00867         addwf    PCL,F
032B                  00868 DectoCharEntries
032B   3430 3431 3432 00869         dt        "0123456789",  0
       3433 3434 3435 
       3436 3437 3438 
       3439 3400 
                      00870         
0336                  00871 StickerColours
                      00872         
                      00873         ;Change Page
0336   00BA           00874         movwf   Temp
0337   30??           00875         movlw   HIGH StickerColoursEntries
0338   008A           00876         movwf   PCLATH
0339   083A           00877         movf    Temp,w
033A   3E??           00878         addlw   LOW StickerColoursEntries
033B   1803           00879         btfsc   STATUS,C
033C   0A8A           00880             incf    PCLATH,f
033D   0082           00881         movwf   PCL     
033E   0782           00882         addwf    PCL,F
033F                  00883 StickerColoursEntries
033F   3442 3457 3400 00884         dt        "BW",  0
                      00885         
                      00886 
                      00887 ;***************************************
                      00888 ; LCD control
                      00889 ;***************************************
0342                  00890 Switch_Lines
0342   30C0           00891                 movlw   B'11000000'
0343   2???           00892                 call    WR_INS
0344   0008           00893                 return
                      00894 
0345                  00895 Clear_Display
0345   3001           00896                 movlw   B'00000001'
0346   2???           00897                 call    WR_INS
0347   0008           00898                 return
                      00899 
                      00900 ;***************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00901 ; Delay 0.5s
                      00902 ;***************************************
0348                  00903 HalfS   
  0000                00904         local   HalfS_0
0348   3088           00905       movlw 0x88
0349   00B0           00906       movwf COUNTH
034A   30BD           00907       movlw 0xBD
034B   00B1           00908       movwf COUNTM
034C   3003           00909       movlw 0x03
034D   00B2           00910       movwf COUNTL
                      00911 
034E                  00912 HalfS_0
034E   0BB0           00913       decfsz COUNTH, f
034F   2???           00914       goto   $+2
0350   0BB1           00915       decfsz COUNTM, f
0351   2???           00916       goto   $+2
0352   0BB2           00917       decfsz COUNTL, f
0353   2???           00918       goto   HalfS_0
                      00919 
0354   2???           00920       goto $+1
0355   0000           00921       nop
0356   0000           00922       nop
0357   0008           00923                 return
                      00924 
                      00925     
                      00926 ;************************************
                      00927 ; RTC Sublabels
                      00928 ;************************************
                      00929     
0358                  00930 show_RTC
                      00931                 ;clear LCD screen
0358   3001           00932                 movlw   b'00000001'
0359   2???           00933                 call    WR_INS
                      00934 
                      00935                 ;Get year
035A   3032           00936                 movlw   "2"                             ;First line shows 20**/**/**
035B   2???           00937                 call    WR_DATA
035C   3030           00938                 movlw   "0"
035D   2???           00939                 call    WR_DATA
                      00940                 rtc_read        0x06            ;Read Address 0x06 from DS1307---year
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
035E   3006               M         movlw   0x06
035F   1283 1303          M         banksel 0x73
0361   00F3               M         movwf   0x73
0362   2???               M         call    read_rtc
0363   1283 1303          M         banksel 0x75
0365   0875               M         movf    0x75,w
0366   2???               M         call    rtc_convert   
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0367   0877           00941                 movfw   0x77
0368   2???           00942                 call    WR_DATA
0369   0878           00943                 movfw   0x78
036A   2???           00944                 call    WR_DATA
                      00945 
036B   302F           00946                 movlw   "/"
036C   2???           00947                 call    WR_DATA
                      00948 
                      00949                 ;Get month
                      00950                 rtc_read        0x05            ;Read Address 0x05 from DS1307---month
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
036D   3005               M         movlw   0x05
036E   1283 1303          M         banksel 0x73
0370   00F3               M         movwf   0x73
0371   2???               M         call    read_rtc
0372   1283 1303          M         banksel 0x75
0374   0875               M         movf    0x75,w
0375   2???               M         call    rtc_convert   
0376   0877           00951                 movfw   0x77
0377   2???           00952                 call    WR_DATA
0378   0878           00953                 movfw   0x78
0379   2???           00954                 call    WR_DATA
                      00955 
037A   302F           00956                 movlw   "/"
037B   2???           00957                 call    WR_DATA
                      00958 
                      00959                 ;Get day
                      00960                 rtc_read        0x04            ;Read Address 0x04 from DS1307---day
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
037C   3004               M         movlw   0x04
037D   1283 1303          M         banksel 0x73
037F   00F3               M         movwf   0x73
0380   2???               M         call    read_rtc
0381   1283 1303          M         banksel 0x75
0383   0875               M         movf    0x75,w
0384   2???               M         call    rtc_convert   
0385   0877           00961                 movfw   0x77
0386   2???           00962                 call    WR_DATA
0387   0878           00963                 movfw   0x78
0388   2???           00964                 call    WR_DATA
                      00965 
0389   30C0           00966                 movlw   B'11000000'             ;Next line displays (hour):(min):(sec) **:**:**
038A   2???           00967                 call    WR_INS
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00968 
                      00969                 ;Get hour
                      00970                 rtc_read        0x02            ;Read Address 0x02 from DS1307---hour
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
038B   3002               M         movlw   0x02
038C   1283 1303          M         banksel 0x73
038E   00F3               M         movwf   0x73
038F   2???               M         call    read_rtc
0390   1283 1303          M         banksel 0x75
0392   0875               M         movf    0x75,w
0393   2???               M         call    rtc_convert   
0394   0877           00971                 movfw   0x77
0395   2???           00972                 call    WR_DATA
0396   0878           00973                 movfw   0x78
0397   2???           00974                 call    WR_DATA
0398   303A           00975                 movlw                   ":"
0399   2???           00976                 call    WR_DATA
                      00977 
                      00978                 ;Get minute             
                      00979                 rtc_read        0x01            ;Read Address 0x01 from DS1307---min
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
039A   3001               M         movlw   0x01
039B   1283 1303          M         banksel 0x73
039D   00F3               M         movwf   0x73
039E   2???               M         call    read_rtc
039F   1283 1303          M         banksel 0x75
03A1   0875               M         movf    0x75,w
03A2   2???               M         call    rtc_convert   
03A3   0877           00980                 movfw   0x77
03A4   2???           00981                 call    WR_DATA
03A5   0878           00982                 movfw   0x78
03A6   2???           00983                 call    WR_DATA         
03A7   303A           00984                 movlw                   ":"
03A8   2???           00985                 call    WR_DATA
                      00986                 
                      00987                 ;Get seconds
                      00988                 rtc_read        0x00            ;Read Address 0x00 from DS1307---seconds
                          M ;input:         addliteral
                          M ;output:        0x75, 0x77, 0x78
                          M ;desc:          From the selected register in the RTC, read the data
                          M ;                       and load it into 0x75. 0x75 is also converted into 
                          M ;                       ASCII characters and the tens digit is placed into
                          M ;                       0x77 and the ones digit is placed in 0x78
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03A9   3000               M         movlw   0x00
03AA   1283 1303          M         banksel 0x73
03AC   00F3               M         movwf   0x73
03AD   2???               M         call    read_rtc
03AE   1283 1303          M         banksel 0x75
03B0   0875               M         movf    0x75,w
03B1   2???               M         call    rtc_convert   
03B2   0877           00989                 movfw   0x77
03B3   2???           00990                 call    WR_DATA
03B4   0878           00991                 movfw   0x78
03B5   2???           00992                 call    WR_DATA
                      00993                 
03B6   2???           00994                 call    OneS                    ;Delay for exactly one seconds and read DS1307 again
                      00995                 ;goto   show_RTC                ;use return instead to check for key press
03B7   0008           00996                 return
                      00997 
                      00998 ;***************************************
                      00999 ; Setup RTC with time defined by user
                      01000 ;***************************************
03B8                  01001 set_rtc_time
                      01002 
                      01003                 rtc_resetAll    ;reset rtc
                          M ;input:         none
                          M ;output:        none
                          M ;desc:          Resets all the time keeping registers on the RTC to zero
03B8   1283 1303          M         banksel         0x74
03BA   01F4               M         clrf            0x74
03BB   1283 1303          M         banksel         0x73
03BD   01F3               M         clrf            0x73
03BE   2???               M     call        write_rtc               ;Write 0 to Seconds
03BF   1283 1303          M         banksel         0x73
03C1   0AF3               M     incf        0x73                    ;Set register address to 1
03C2   2???               M         call            write_rtc
03C3   1283 1303          M         banksel         0x73
03C5   0AF3               M     incf        0x73                    ;Set register address to 2
03C6   2???               M         call            write_rtc
03C7   1283 1303          M         banksel         0x73
03C9   0AF3               M     incf        0x73                    ;Set register address to 3
03CA   2???               M         call            write_rtc
03CB   1283 1303          M         banksel         0x73
03CD   0AF3               M     incf        0x73                    ;Set register address to 4
03CE   2???               M         call            write_rtc
03CF   1283 1303          M         banksel         0x73
03D1   0AF3               M     incf        0x73                    ;Set register address to 5
03D2   2???               M         call            write_rtc
03D3   1283 1303          M         banksel         0x73
03D5   0AF3               M     incf        0x73                    ;Set register address to 6
03D6   2???               M         call            write_rtc
                      01004 
                      01005                 rtc_set 0x00,   B'10000000'
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03D7   1283 1303          M         banksel 0x73
03D9   3000               M         movlw   0x00
03DA   00F3               M         movwf   0x73
03DB   1283 1303          M         banksel 0x74
03DD   3080               M         movlw   B'10000000'
03DE   00F4               M         movwf   0x74    
03DF   2???               M         call    write_rtc
                      01006 
                      01007                 ;set time 
                      01008                 rtc_set 0x06,   B'00010110'             ; Year
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03E0   1283 1303          M         banksel 0x73
03E2   3006               M         movlw   0x06
03E3   00F3               M         movwf   0x73
03E4   1283 1303          M         banksel 0x74
03E6   3016               M         movlw   B'00010110'
03E7   00F4               M         movwf   0x74    
03E8   2???               M         call    write_rtc
                      01009                 rtc_set 0x05,   B'00000010'             ; Month
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03E9   1283 1303          M         banksel 0x73
03EB   3005               M         movlw   0x05
03EC   00F3               M         movwf   0x73
03ED   1283 1303          M         banksel 0x74
03EF   3002               M         movlw   B'00000010'
03F0   00F4               M         movwf   0x74    
03F1   2???               M         call    write_rtc
                      01010                 rtc_set 0x04,   B'00010110'             ; Date
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03F2   1283 1303          M         banksel 0x73
03F4   3004               M         movlw   0x04
03F5   00F3               M         movwf   0x73
03F6   1283 1303          M         banksel 0x74
03F8   3016               M         movlw   B'00010110'
03F9   00F4               M         movwf   0x74    
03FA   2???               M         call    write_rtc
                      01011                 rtc_set 0x03,   B'00100001'             ; Day
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
03FB   1283 1303          M         banksel 0x73
03FD   3003               M         movlw   0x03
03FE   00F3               M         movwf   0x73
03FF   1283 1303          M         banksel 0x74
0401   3021               M         movlw   B'00100001'
0402   00F4               M         movwf   0x74    
0403   2???               M         call    write_rtc
                      01012                 rtc_set 0x02,   B'00000001'             ; Hours
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
0404   1283 1303          M         banksel 0x73
0406   3002               M         movlw   0x02
0407   00F3               M         movwf   0x73
0408   1283 1303          M         banksel 0x74
040A   3001               M         movlw   B'00000001'
040B   00F4               M         movwf   0x74    
040C   2???               M         call    write_rtc
                      01013                 rtc_set 0x01,   B'00110101'             ; Minutes
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
040D   1283 1303          M         banksel 0x73
040F   3001               M         movlw   0x01
0410   00F3               M         movwf   0x73
0411   1283 1303          M         banksel 0x74
0413   3035               M         movlw   B'00110101'
0414   00F4               M         movwf   0x74    
0415   2???               M         call    write_rtc
                      01014                 rtc_set 0x00,   B'01010000'             ; Seconds
                          M ;input:         addliteral: value of address
                          M ;                       datliteral: value of data
                          M ;output:        none
                          M ;desc:          loads the data in datliteral into the 
                          M ;                       address specified by addliteral in the RTC
0416   1283 1303          M         banksel 0x73
0418   3000               M         movlw   0x00
0419   00F3               M         movwf   0x73
041A   1283 1303          M         banksel 0x74
041C   3050               M         movlw   B'01010000'
041D   00F4               M         movwf   0x74    
041E   2???               M         call    write_rtc
041F   0008           01015                 return
                      01016 
                      01017 
                      01018 ;***************************************
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01019 ; Delay 1s
                      01020 ;***************************************
0420                  01021 OneS
  0000                01022                 local   OneS_0
0420   3010           01023       movlw 0x10
0421   00B0           01024       movwf COUNTH
0422   307A           01025       movlw 0x7A
0423   00B1           01026       movwf COUNTM
0424   3006           01027       movlw 0x06
0425   00B2           01028       movwf COUNTL
                      01029 
0426                  01030 OneS_0
0426   0BB0           01031       decfsz COUNTH, f
0427   2???           01032       goto   $+2
0428   0BB1           01033       decfsz COUNTM, f
0429   2???           01034       goto   $+2
042A   0BB2           01035       decfsz COUNTL, f
042B   2???           01036       goto   OneS_0
                      01037 
042C   2???           01038       goto $+1
042D   0000           01039       nop
042E   0000           01040       nop
042F   0008           01041                 return
                      01042 
                      01043 ;***************************************
                      01044 ; Print sticker values
                      01045 ;***************************************
0430                  01046 PrintBlackSticker
0430   3000           01047         movlw       b'0'
0431   2???           01048         call        StickerColours
0432   2???           01049         call        WR_DATA
0433   0008           01050         return
                      01051 
0434                  01052 PrintWhiteSticker
0434   3001           01053         movlw       b'1'
0435   2???           01054         call        StickerColours
0436   2???           01055         call        WR_DATA
0437   0008           01056         return
                      01057         
                      01058 ;***************************************
                      01059 ; Number to Colour
                      01060 ;***************************************
                      01061 PrintCol macro  number
                      01062         movlw       0x80
                      01063         call        WR_INS
                      01064         call        lcdLongDelay
                      01065         movf        number ,W
                      01066         call        BinCol
                      01067         call        WR_DATA
                      01068         endm            
                      01069 
                      01070     
3F72                  01071         END
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
BinLocations                      000002B4
BinLocationsDisplay               0000018C
BinLocationsEntries               000002BD
Bins                              00000289
BinsDisplay                       0000012F
BinsEntries                       00000292
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

CKP                               00000004
COUNTH                            00000030
COUNTL                            00000032
COUNTM                            00000031
CREN                              00000004
CSRC                              00000007
ChooseIR1                         000000B2
ChooseIR2                         000000B6
Clear_Display                     00000345
ClrLCD                            00000000
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DCMotor                           PORTA,3
D_A                               00000005
D_NOT_A                           00000005
DectoChar                         00000322
DectoCharEntries                  0000032B
Display                           
E                                 PORTD,3
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
F                                 00000001
FERR                              00000002
FSR                               00000004
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
HalfS                             00000348
Hund                              00000041
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IR1                               PORTA,0
IR2                               PORTA,1
IRP                               00000007
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 34


SYMBOL TABLE
  LABEL                             VALUE 

InitLCD                           00000000
Key                               
KeypadandLCD                      00000062
LCDConversion                     00000093
LCD_DELAY                         
Lb1                               00000022
Lb2                               00000026
Lb3                               0000002A
Lb4                               0000002E
ListDisplay                       00000118
Location1                         0000003B
Location2                         0000003C
Main                              0000005D
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
NumH                              0000003D
NumL                              0000003E
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
OneS                              00000420
Ones                              00000043
Operation                         000001D2
OperationDisplay                  000000F8
OperationEntries                  000001DB
OperationTime                     000002D4
OperationTimeDisplay              00000198
OperationTimeEntries              000002DD
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 35


SYMBOL TABLE
  LABEL                             VALUE 

PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
PrintBlackSticker                 00000430
PrintCol                          
PrintNumber                       
PrintWhiteSticker                 00000434
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 36


SYMBOL TABLE
  LABEL                             VALUE 

RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RS                                PORTD,2
RSEN                              00000001
RTCDisplay                        000001A8
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
ReceivedInput                     000002EF
ReceivedInputEntries              000002F8
Results1                          0000022E
Results1Entries                   00000237
Results2                          0000025C
Results2Entries                   00000265
Rotation                          
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
ScanBackContainer                 000000D9
ScanFrontContainer                000000BA
ShiftLeft                         000001A4
SmallValueInput                   0000030D
SmallValueInputEntries            00000316
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 37


SYMBOL TABLE
  LABEL                             VALUE 

StickerColours                    00000336
StickerColoursEntries             0000033F
StickerDisplay                    0000013B
StickerStatus                     000002A2
StickerStatusEntries              000002AB
Switch_Lines                      00000342
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 38


SYMBOL TABLE
  LABEL                             VALUE 

TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
Table_Counter                     00000033
Temp                              0000003A
TenK                              0000003F
Tens                              00000042
Thou                              00000040
UA                                00000001
US                                PORTA,2
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
WR_DATA                           00000000
WR_INS                            00000000
WantResults                       000001E8
WantResultsEntries                000001F1
WantRotate                        0000020C
WantRotateEntries                 00000215
Welcome_Msg                       000001B2
Welcome_MsgEntries                000001BB
Z                                 00000002
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 39


SYMBOL TABLE
  LABEL                             VALUE 

_.org_0_0063                      00000063
_.org_0_0090                      00000090
_.org_0_0096                      00000096
_.org_0_00BC                      000000BC
_.org_0_00DB                      000000DB
_.org_0_0147                      00000147
_.org_0_0152                      00000152
_.org_0_015D                      0000015D
_.org_0_0168                      00000168
_.org_0_0173                      00000173
_.org_0_017E                      0000017E
_.org_0_0189                      00000189
_.org_0_034F                      0000034F
_.org_0_0351                      00000351
_.org_0_0354                      00000354
_.org_0_0427                      00000427
_.org_0_0429                      00000429
_.org_0_042C                      0000042C
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
MPASM 5.65                          MAIN.ASM   2-21-2016  20:47:12         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
__DEBUG                           
__MPLAB_DEBUGGER_PICKIT2          1
backbinCounter                    00000049
backstickerValues                 00000047
bin16_BCD                         00000001
binCounter                        0000004A
com                               00000037
dat                               00000038
distanceMoved                     00000044
frontbinCounter                   00000048
frontstickerValues                00000046
goback                            00000092
i2c_common_setup                  00000000
init                              00000034
isColumnThere                     00000045
lcd_d1                            00000035
lcd_d2                            00000036
lcd_tmp                           00000034
read_rtc                          00000000
rtc_convert                       00000000
rtc_read                          
rtc_resetAll                      
rtc_set                           
set_rtc_time                      000003B8
show_RTC                          00000358
temp                              00000039
write_rtc                         00000000

Errors   :     0
Warnings :     4 reported,     0 suppressed
Messages :     0 reported,    23 suppressed

